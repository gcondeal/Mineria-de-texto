function tmgAdsInit(e){try{return tmgAdsEvent("tmggpt-init:start"),e.log=e.log||[],e.ads={},e.adslots={},e.errors=[],e.data={metatags:{}},e.performance={},e.refreshTimers={},e.headerbidding={amazon:{bids:[]},indexExchange:{bids:[]},appnexus:{bids:[]}},e.plugins={gpt:{networkid:6582,servername:"ad.doubleclick.net",async:!0,enableSingleRequest:!1,enableAsyncRendering:!0,collapseEmptyDivs:!0,setLocation:!1,vastOutputVersion:"xml_vast3",url:"https://www.googletagservices.com/tag/js/gpt.js",ooyalaCMSID:5694,geoapi:{precision:2e4,watching:!1,test:"string"}},blockdomain:["chase.telegraph.co.uk","cms1.aem-dev1.awspreprod.telegraph.co.uk","cms1.aem-dev2.awspreprod.telegraph.co.uk","cms1.aem-dev3.awspreprod.telegraph.co.uk","cms1.aem-dev4.awspreprod.telegraph.co.uk","cms1.aem-dev5.awspreprod.telegraph.co.uk","cms1.aem-dev6.awspreprod.telegraph.co.uk","cms1.aem-dev7.awspreprod.telegraph.co.uk","cms1.aem-dev8.awspreprod.telegraph.co.uk","cms1.aem-dev9.awspreprod.telegraph.co.uk","cms1.aem-dev10.awspreprod.telegraph.co.uk","cms1.aem-dev11.awspreprod.telegraph.co.uk","cms1.aem-dev12.awspreprod.telegraph.co.uk","cms1.aem-test1.awspreprod.telegraph.co.uk","cms1.aem-test2.awspreprod.telegraph.co.uk","cms1.aem-test3.awspreprod.telegraph.co.uk","cms1.aem-test4.awspreprod.telegraph.co.uk","cms1.aem-test5.awspreprod.telegraph.co.uk","cms1.aem-test6.awspreprod.telegraph.co.uk","cms1.aem-editorial1.awspreprod.telegraph.co.uk","cms1.aem-editorial2.awspreprod.telegraph.co.uk","cms1.aem-nitro1.awspreprod.telegraph.co.uk","cms1.aem-demo.awspreprod.telegraph.co.uk","cms1.aem-perf1.awspreprod.telegraph.co.uk","cms1.aem-perf2.awspreprod.telegraph.co.uk"],test:{active:!1,status:!1,async:!1,url:"//adtools.telegraph.co.uk/tools/delay/?delay=4&type=js"},refurl:{active:!0},scrollspeed:!1,sizemapping:{x:{size:[1368,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90]],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90]],mpu:[[300,600],[300,250]],sky:[[300,600],[300,250],[160,600],[120,600]],hpg:[[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},l:{size:[1008,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],bbt:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90]],bbb:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90]],mpu:[[300,600],[300,250]],sky:[[300,600],[300,250],[160,600],[120,600]],hpg:[[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},m:{size:[730,480],ban:[[728,90],[468,60]],bbt:[[728,90],[468,60]],bbb:[[728,90],[468,60]],mpu:[300,250],hpg:[300,250],sky:[300,250],mob:[[300,250],[320,100],[320,50],[300,50]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},s:{size:[480,320],ban:[[300,250],[320,100],[320,50],[300,50],[468,60]],bbt:[[300,250],[320,100],[320,50],[300,50],[468,60]],bbb:[[300,250],[320,100],[320,50],[300,50],[468,60]],mpu:[[300,250],[320,100],[320,50],[300,50],[468,60]],sky:[[300,250],[320,100],[320,50],[300,50],[468,60]],hpg:[[300,250],[320,100],[320,50],[300,50],[468,60]],mob:[[300,250],[320,100],[320,50],[300,50],[468,60]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},xs:{size:[0,0],ban:[[300,250],[320,100],[320,50],[300,50]],bbt:[[300,250],[320,100],[320,50],[300,50]],bbb:[[300,250],[320,100],[320,50],[300,50]],mpu:[[300,250],[320,100],[320,50],[300,50]],sky:[[300,250],[320,100],[320,50],[300,50]],hpg:[[300,250],[320,100],[320,50],[300,50]],mob:[[300,250],[320,100],[320,50],[300,50]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},default:{size:[0,0],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],bbt:[[970,250],[970,90],[970,66]],bbb:[[970,250],[970,90],[970,66]],mpu:[[300,600],[300,250]],sky:[[300,600],[300,250],[160,600],[120,600]],hpg:[[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],dyn:[[300,250],[320,50],[300,50]],nat:["fluid",[1,1]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],opt:[1,1],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}},adiesticky:tmgAdsGetURLParam("adiesticky",window.location.search),adtest:tmgAdsGetURLParam("adtest",window.location.search),adteston:tmgAdsGetURLParam("adteston",window.location.search),adconsole:tmgAdsGetURLParam("adconsole",window.location.search),adsafe:tmgAdsGetURLParam("adsafe",window.location.search),adkill:tmgAdsGetURLParam("adkill",window.location.search),adprebid:tmgAdsGetURLParam("adprebid",window.location.search),adscroll:tmgAdsGetURLParam("adscroll",window.location.search),adixtest:tmgAdsGetURLParam("adixtest",window.location.search),adviewability:tmgAdsGetURLParam("adviewability",window.location.search),advast4:tmgAdsGetURLParam("advast4",window.location.search),adscrollon:tmgAdsGetURLParam("adscrollon",window.location.search),adscrolloff:tmgAdsGetURLParam("adscrolloff",window.location.search),adgrapeshoton:tmgAdsGetURLParam("adgrapeshoton",window.location.search),adgrapeshotoff:tmgAdsGetURLParam("adgrapeshotoff",window.location.search),adbeemrayon:tmgAdsGetURLParam("adbeemrayon",window.location.search),adbeemrayoff:tmgAdsGetURLParam("adbeemrayoff",window.location.search),adheaderbidon:tmgAdsGetURLParam("adheaderbidon",window.location.search),adheaderbidoff:tmgAdsGetURLParam("adheaderbidoff",window.location.search),adprebidon:tmgAdsGetURLParam("adprebidon",window.location.search),adprebidoff:tmgAdsGetURLParam("adprebidoff",window.location.search),adindexon:tmgAdsGetURLParam("adindexvidon",window.location.search),adindexoff:tmgAdsGetURLParam("adindexvidoff",window.location.search),adindexvidon:tmgAdsGetURLParam("adindexvidon",window.location.search),adindexvidoff:tmgAdsGetURLParam("adindexvidoff",window.location.search),adamazona9on:tmgAdsGetURLParam("adamazona9on",window.location.search),adamazona9off:tmgAdsGetURLParam("adamazona9off",window.location.search),adstickyon:tmgAdsGetURLParam("adstickyon",window.location.search),adstickyoff:tmgAdsGetURLParam("adstickyoff",window.location.search),adnativeon:tmgAdsGetURLParam("adnativeon",window.location.search),adnativeoff:tmgAdsGetURLParam("adnativeoff",window.location.search),dnt:{active:!0,state:tmgAdsGetDoNotTrack()},counters:20,tmgcookies:{active:!0},performance:{active:!0,supported:"unknown"},chartbeat:{active:!1},quantcast:{active:!0,maxSegs:10},krux:{active:!1,includeinurl:!0,maxSegs:50},adobe:{active:!0},adomik:{active:!0,getAdGroup:function(){var e=Math.random();switch(!1){case!(e<.09):return"ad_ex"+Math.floor(100*e);case!(e<.1):return"ad_bc";default:return"ad_opt"}}},adSlotRefresh:{active:!0,retryPeriod:200,retryLimit:60,retryCount:0,exemptAdSlots:["nat","bbt","bbb","dyn","tmg","inr","opt","ftr"],pagetypes:["index","story","live","video","gallery"]},dynad:{active:!0,viewports:["xs","s","m"]},oopunits:["tmg","inr","int","opt","ftr"],beemray:{name:"beemray",active:!0,id:"5e463430-b036-4755-ac9a-233b7a357002",url:"https://telegraph.sdk.beemray.com/content/websdk/5e463430-b036-4755-ac9a-233b7a357002?source="+btoa(location.href),preload:function(){tmgAdsLog("tmgAds.plugins.beemray.preload()")},callback:function(){tmgAdsLog("tmgAds.plugins.beemray.callback()")}},scroll:{name:"scroll",active:!1,url:"https://static.scroll.com/js/scroll.js",preload:function(){tmgAdsLog("tmgAds.plugins.scroll.preload()"),function(e,t,s,d){if(!e[t]){var a=e[t]={};a._q=[],a.do=function(e){a._q.push(e)}}}(window,"Scroll"),Scroll.config={detected:document.cookie.indexOf("scroll0=")>-1}},callback:function(){tmgAdsLog("tmgAds.plugins.scroll.callback()")}},grapeshot:{name:"grapeshot",active:!0,maxSegs:20,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:!1,url:"https://telegraph.grapeshot.co.uk/main/channels.cgi?url="+location.protocol+"//"+location.host+location.pathname,preload:function(){tmgAdsLog("tmgAds.plugins.grapeshot.preload()")},callback:function(){tmgAdsLog("tmgAds.plugins.grapeshot.callback()")}},lazyLoad:{xs:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["nat","dyn"]},s:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["nat","dyn"]},m:{active:!0,offset:-250,delayCall:150,geo:[],channels:[],lazy:["nat"]},l:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["nat","bbt","bbb"]},x:{active:!0,offset:-750,delayCall:150,geo:[],channels:[],lazy:["nat","bbt","bbb"]}},nativeads:{active:!0,counters:{},config:{name:"Native advert configuration",version:"0.3",date:"2017-07-13",active:!0,exclude:["subscriptions","rewards"],pagetype:{index:{adverts:[{id:"nat_index_sidebar",active:!0,include:[],exclude:[],selector:".article__sidebar .social-follow",position:"after",viewports:["l","x"]},{id:"nat_index_logo",active:!1,include:[],exclude:[],selector:".header-breadcrumbs__list",position:"after",viewports:["xs","s","m","l","x"]},{id:"nat_index_mob_portal_newsfeed",active:!0,include:[],exclude:[],selector:".splitter__slot .splitter__slot--2",position:"after",viewports:["xs","s"]},{id:"nat_index_firstlist_mob",active:!0,include:[],exclude:["sport","opinion","fashion","luxury","portal"],selector:".js-list-of-entities__container",position:"after",viewports:["xs","s"]},{id:"nat_index_multilist_mob",active:!1,include:[],exclude:[],selector:".js-list-of-entities__container",list:{position:5,repeat:!0},viewports:["xs","s","m"]}]},story:{adverts:[{id:"nat_story_logo",active:!1,include:[],exclude:[],selector:".header-breadcrumbs__list",position:"after",viewports:["xs","s","m","l","x"]},{id:"nat_story_sidebar",active:!0,include:[],exclude:[],selector:".article__sidebar .social-follow",position:"before",viewports:["l","x"]},{id:"nat_story_top",active:!0,include:[],exclude:[],selector:".hero-area-wrapper",position:"after",viewports:["xs","s","m","l","x"]},{id:"nat_story_sparkbrain_1",active:!1,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",viewports:["xs","s","m","l","x"]},{id:"nat_story_outbrain",active:!1,include:[],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"before",viewports:["l","x"]},{id:"nat_story_sparkbrain_2",active:!0,include:["business","money","travel"],exclude:[],selector:".article__spark #polar-ad-article-bottom",position:"after",viewports:["l","x"]},{id:"bbt_story_latest_top",active:!1,include:[],exclude:[],selector:".snippet-onward-journey",position:"before",viewports:["l","x"]},{id:"bbb_story_latest_bottom",active:!0,include:[],exclude:[],selector:".snippet-onward-journey",position:"after",viewports:["l","x"]},{id:"nat_story_list_onward_mob",active:!0,include:[],exclude:[],selector:".article__related .list:last-child .list-of-entities__container",list:{position:6,repeat:!0},viewports:["xs","s"]}]}}}},models:{story:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],live:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],video:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],"video-play":[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","bbt","bbb"]}],index:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat","mpu","hpg"]}],topic:[{viewport:"x",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"ban",minHeight:900,refreshRate:11e3,refreshCycle:1,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:11e3,refreshCycle:1,exempt:["nat"]}],"video-index":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],gallery:[{viewport:"x",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"mpu",minHeight:900,refreshRate:11e3,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]},{viewport:"xs",ruleName:"Default",model:"ban",minHeight:0,refreshRate:15e3,refreshCycle:2,exempt:["nat","mpu"]}],"travel-product":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-product-listing":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-destinations":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"travel-review":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],"rewards-offers-detail":[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],bare:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],unset:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}],default:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0,exempt:["nat"]}]}},e.layout={viewport:"u",viewportWidth:"",getBreakpoint:function(t){var s="xs";return t>=e.plugins.sizemapping.s.size[0]&&(s="s"),t>=e.plugins.sizemapping.m.size[0]&&(s="m"),t>=e.plugins.sizemapping.l.size[0]&&(s="l"),t>=e.plugins.sizemapping.x.size[0]&&(s="x"),tmgAdsLog("tmgAds.layout.getBreakpoint -> width:"+e.layout.viewportWidth+" height:"+e.layout.viewportHeight+" size:"+e.layout.viewport),s},getViewportWidth:function(){return document.documentElement.clientWidth>=0?document.documentElement.clientWidth:document.body&&document.body.clientWidth>=0?document.body.clientWidth:window.innerWidth>=0?window.innerWidth:0},getViewportHeight:function(){return document.documentElement.clientHeight>=0?document.documentElement.clientHeight:document.body&&document.body.clientHeight>=0?document.body.clientHeight:window.innerHeight>=0?window.innerHeight:0},onresize:function(){e.layout.viewportHeight=e.layout.getViewportHeight(),e.layout.viewportWidth=e.layout.getViewportWidth(),e.layout.viewport=e.layout.getBreakpoint(e.layout.viewportWidth),"xs"==e.layout.viewport||"s"==e.layout.viewport||"m"==e.layout.viewport?e.layout.platform="mobile":e.layout.platform="desktop"},addEvent:function(e,t,s){null!==e&&"undefined"!=e&&(e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s)}},e.page=tmgAdsGetPageData(),e.layout.onresize(),tmgAdsLog("Current viewport now: "+e.layout.viewport),tmgAdsLog("Creating an event handler for dealing with page layout changes ie; viewport change"),e.layout.addEvent(window,"resize",e.layout.onresize),e.plugins.headerBidders={active:!0,delayed:0,zones:[],indexExchange:{name:"indexexchange",active:!0,bidstatus:"config",local:!1,async:!1,jsloc:function(){return!1},jsprod:"https://js-sec.indexww.com/ht/p/184224-249976729910975.js",jstest:"https://js-sec.indexww.com/ht/p/184224-249976729910975-stage.js",jstag:"",loc:"head",exempt:["nat","tmg","inr","ftr"],siteId:888888,timeout:800,preload:function(){console.log("tmgAds.plugins.headerBidders.indexEchange.preload()")},callback:function(){console.log("tmgAds.plugins.headerBidders.indexEchange.callback()")},video:{active:!1,url:"https://as-sec.casalemedia.com/playlist?ix_id=%5Bindex_epr%5D&ix_v=8&ix_s=208024&ix_ms=208154&ix_vt="},partners:{INDX:{targetingType:"slot",timeout:150}}},prebid:{name:"prebid",active:!0,bidstatus:"config",local:!0,async:!1,jsloc:function(){return!1},jsprod:"https://secure.s.telegraph.co.uk/tmgads/prebid/prebid.js",jstest:"https://secure.s.telegraph.co.uk/tmgads/prebid/prebid-test.js",jstag:"",loc:"head",exempt:["nat","tmg","inr","ftr"],timeout:1e3,preload:function(){console.log("tmgAds.plugins.headerBidders.prebid.preload()")},callback:function(){console.log("tmgAds.plugins.headerBidders.prebid.callback()")}},amazon:{name:"amazon",active:!0,bidstatus:"config",local:!1,async:!1,jsloc:function(){return!1},jsprod:"https://c.amazon-adsystem.com/aax2/apstag.js",jstest:"http://adtools.telegraph.co.uk/tmg/gpt/prebid/prebid-test.js",jstag:"",loc:"head",exempt:["nat","tmg","inr","ftr"],adserver:"googletag",siteId:3461,timeout:2e3,ssp:{"1yj0n4":"amazon","1yu87wg":"pubmatic","210wzk":"openx",jsaxhc:"rubicon"},preload:function(){console.log("tmgAds.plugins.headerBidders.amazon.preload()")},callback:function(){console.log("tmgAds.plugins.headerBidders.amazon.callback()")}}},tmgAdsLog("TMG-GPT-"+e.about.version+" - "+e.about.date),tmgAdsLog("SUCCESS: tmgAdsInit() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init:end"),e}catch(t){tmgAdsLog("ERROR: tmgAdsInit() failed -> error="+t.message,e)}}function tmgAdsPerf(e,t){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+e+" - "+t[0]),tmgAds.log.push("Performance: RUM Installed - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),RUM.mark(t[0]);if("measure"==e)return RUM.measure(t[0],t[1],t[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+e+" - "+t[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+e+" - "+t[0]),"now"==e)return window.performance.now();if("mark"==e)return tmgAds.metrics[t[0]]=tmgAdsTimer(),window.performance.mark(t[0]);if("measure"==e)return window.performance.measure(t[0],t[1],t[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+e+" - "+t[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+e+" - "+t[0]),"now"==e)return RUM.now();if("mark"==e)return void(tmgAds.metrics[t[0]]=tmgAdsTimer());if("measure"==e)return}}function tmgAdsGetObj(e){return window[e]}function tmgAdsInitConfig(e){try{return tmgAdsEvent("tmggpt-init-conf:start"),e.config={viewportstatus:!0,refurl:!0,adsizematrix_:e.plugins.sizemapping.default,model:e.plugins.model},e.config.deliveryModels=e.model,tmgAdsLog("SUCCESS: tmgAdsInitConfig() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-conf:end"),e}catch(e){tmgAdsLog("ERROR: tmgAdsInitConfig() failed -> error="+e.message),tmgAdsEvent("tmggpt-init-conf:end")}}function tmgAdsInitData(e){try{tmgAdsEvent("tmggpt-init-data:start"),e.counters={},e.metatags={},e.page=tmgAdsGetPageData(),e.tmg=tmgAdsGetTMGUserData(),e.google=tmgAdsGetGoogleData(),e.adobe=tmgAdsGetAdobe(),e.krux=tmgAdsGetKruxData(),e.browser=tmgAdsGetBrowserData(),e.flash=tmgAdsFlashDetect(),e.cookies={all:document.cookie},e.cookies.adops=tmgAdsGetTMGCookies("adops"),e.adsafe=tmgAdsGetAdsafeBlocks(),e.page.cms=tmgAdsGetCMS();for(var t in e.plugins.blockdomain)e.plugins.blockdomain.hasOwnProperty(t)&&e.page.domain==e.plugins.blockdomain[t]&&(e.plugins.adkill=!0,tmgAdsLog("tmgAdsInitConfig: This page is being viewed through one of our AEM preview instances, turning ads off in: "+e.plugins.blockdomain[t]));return void 0===window.optimize?(tmgAdsLog("OPTIMIZELY: WARNING -> window.optimize is not defined, creating empty obj"),window.optimize=window.optimize||{activeExperiments:[]}):tmgAdsLog("OPTIMIZELY: window.optimize is defined"),e.optimizely=window.optimize.activeExperiments,tmgAdsLog("SUCCESS: tmgAdsInitData() initialisation"),tmgAdsLog("##################################################################################################################"),tmgAdsEvent("tmggpt-init-data:end"),e}catch(e){tmgAdsLog("ERROR: tmgAdsInitData() - failed -> error="+e.message),tmgAdsEvent("tmggpt-init-data:end")}}function tmgAdsInitDFP(e){tmgAdsEvent("tmggpt-init-dfp:start"),e.dfp=tmgAdsGetDFPData(),e.dfp.customvars=tmgAdsGetGPTCustomVars(),e.dfp.gpt=tmgAdsGetGPTSetup(e.dfp.gpt),e.dfp.adunit="/"+e.dfp.networkid+"/"+e.dfp.sitezone,tmgAdsLog("AdUnit set to: "+e.dfp.adunit),e.geo=tmgAdsGetGeoAPI(),tmgAdsAdjustSizeMapping(),e.adCount=0,e.dynCount=0,tmgAdsEvent("tmggpt-init-dfp:end")}function tmgAdsInitEventHandlers(){tmgAdsLog("Called: tmgAdsInitEventHandlers()");try{var e=document.addEventListener||document.attachEvent,t=(document.removeEventListener||document.detachEvent,document.addEventListener?"DOMContentLoaded":"onreadystatechange");e.call(document,t,function(){("DOMContentLoaded"===t||"onreadystatechange"===t&&"complete"===document.readyState)&&(tmgAdsLog("SUCCESS: DOMContentLoaded/onreadystatechange = complete: Page has loaded, DOM ready."),tmgAdsOnPageLoad(tmgAds))}),googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){tmgAdsActionEventHandler("slotRenderEnded",e)}),googletag.pubads().addEventListener("impressionViewable",function(e){tmgAdsActionEventHandler("impressionViewable",e)}),googletag.pubads().addEventListener("slotVisibilityChanged",function(e){tmgAdsActionEventHandler("slotVisibilityChanged",e)})}),document.addEventListener("tmg:init-ads",function(e){tmgAdsEvent("tmggpt-init-ads:start"),tmgAdsInitData(tmgAds),tmgAdsInitDFP(tmgAds);for(var t in tmgAds.ads)tmgAds.ads.hasOwnProperty(t)&&(googletag.destroySlots([tmgAds.ads[t].adslot]),googletag.cmd.push(tmgAdsBuildAd(tmgAds.ads[t].div,"","").display()));tmgAdsEvent("tmggpt-init-ads:end")}),document.addEventListener("tmgAds:tmggpt-revertStickyBanner",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-revertStickyBanner")}),document.addEventListener("tmgAds:tmggpt-collapseStickyAdslot",function(e){tmgAdsActionEventHandler("tmgAds_tmggpt-collapseStickyAdslot")}),document.addEventListener("tmgAds:tmggpt:initstart",function(e){tmgAdsPerf("mark",["adverts_tmggpt_start"])}),document.addEventListener("tmgAds:tmggpt:initend",function(e){tmgAdsPerf("mark",["adverts_tmggpt_end"]),tmgAdsPerf("measure",["adverts_tmggpt_loadtime","adverts_tmggpt_start","adverts_tmggpt_end"])}),document.addEventListener("tmgAds:tmggpt:pageload",function(e){tmgAdsPerf("mark",["adverts_tmggpt_pageload"]),tmgAdsPerf("mark",["adverts_page_end"])}),document.addEventListener("tmgAds:grapeshot:loaded",function(e){tmgAds.grapeshot={raw:null,dfp:[]},void 0!==window.gs_channels?(tmgAds.grapeshot={raw:window.gs_channels,dfp:window.gs_channels.split(",")},tmgAdsLog("GRAPESHOT: window.gs_channels exists : "),tmgAdsLog("GRAPESHOT: window.gs_channels number : "+tmgAds.grapeshot.dfp.length),tmgAdsLog("GRAPESHOT: window.gs_channels content: "+tmgAds.grapeshot.dfp.toString())):tmgAdsLog("GRAPESHOT: window.gs_channels does not exist:"),tmgAdsInitData(tmgAds),tmgAdsInitDFP(tmgAds)}),document.addEventListener("tmgAds:index:loaded",function(e){googletag.cmd.push(function(){void 0!==typeof window.headertag&&!0===window.headertag.apiReady||(window.headertag=googletag,tmgAdsLog("SUCCESS: window.headertag.apiReady is true - headertag object exists"))})}),document.addEventListener("tmgAds:index:reload",function(e){tmgAdsPerf("mark",["adverts_indexexchange_reload"]),tmgAdsLoadJS("index",tmgAds.plugins.headerBidders.indexExchange.jslib,function(){})}),document.addEventListener("tmgAds:amazon:loaded",function(e){tmgAdsActionEventHandler("adverts_amazon_loaded")}),document.addEventListener("tmgAds:amazon:reload",function(e){tmgAdsActionEventHandler("adverts_amazon_reload")}),document.addEventListener("tmgAds:headerbid:start",function(e){tmgAdsPerf("mark",["adverts_headerbid_start"])}),document.addEventListener("tmgAds:headerbid:end",function(e){tmgAdsPerf("mark",["adverts_headerbid_end"])}),document.addEventListener("tmgAds:headerbid:relaod",function(e){tmgAdsPerf("mark",["adverts_headerbid_reload"]),tmgAdsInitHeaderBidders(tmgAds)})}catch(e){tmgAdsLog("ERROR: tmgAdsInitEventHandlers() - failed -> error="+e.message)}}function tmgAdsActionEventHandler(e,t){try{switch(e){case"tmgAds_tmggpt-revertStickyBanner":tmgAdsLog("tmgAds_tmggpt-revertStickyBanner: removing is-sticky class from advert_tmg_ban"),document.getElementById("advert_tmg_ban").parentNode.classList.remove("is-sticky");break;case"tmgAds_tmggpt-collapseStickyAdslot":tmgAdsLog("We will now close down the sticky ad for the this adunit: "+tmgAds.config.deliveryModel.model),document.getElementById("advert_tmg_"+tmgAds.config.deliveryModel.model).style.height="0px",setTimeout(function(){document.getElementsByClassName("is-sticky")[0].style.height="0px"},1e3);break;case"slotRenderEnded":var s={timestamp:tmgAdsTimer(),advertiserId:t.advertiserId,campaignId:t.campaignId,lineItemId:t.lineItemId,creativeId:t.creativeId,esid:null,epid:null,optimisely:null,moat:"https://z.moatads.com/telegraphdfp799172313855/moatad.js#moatClientLevel1="+t.advertiserId+"&moatClientLevel2="+t.camapignId+"&moatClientLevel3="+t.lineItemId+"&moatClientLevel4="+t.creativeId+"&moatClientSlicer1=null&moatClientSlicer2=null&zMoatPS="+t.slot.getTargeting("at")+"&zMoatSZ="+t.size[0]+"x"+t.size[1]+"&zMoatPT="+t.slot.getTargeting("pt")+"&zMoatVP="+t.slot.getTargeting("vp")+"&zMoatOP=null&zMoatST="+t.slot.getTargeting("sc"),sz:t.size[0]+"x"+t.size[1],natid:t.slot.getTargeting("natid"),div:t.slot.getTargeting("div"),pos:t.slot.getTargeting("pos"),at:t.slot.getTargeting("at"),pt:t.slot.getTargeting("pt"),vp:t.slot.getTargeting("vp"),sc:t.slot.getTargeting("sc")};tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),void 0===tmgAds.metrics.tmggptAdFirstAdRendered&&(tmgAdsLog("tmgAds.metrics.tmggptAdFirstAdRendered is not defined, setting this now"),tmgAdsPerf("mark",["adverts_metrics_firstadloaded"]),tmgAds.metrics.tmggptAdFirstAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderFirstAd=tmgAds.metrics.tmggptAdFirstAdRendered),tmgAdsPerf("mark",["adverts_loaded_"+s.at]),tmgAds.metrics.tmggptAdLastAdRendered=s.timestamp,tmgAds.metrics.metricTimeToRenderAllAds=tmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptAdFirstAdQueued;var d=document.getElementById(s.div);t.isEmpty?(d.classList.add("is-empty"),d.classList.remove("is-loaded"),d.style.height=0,d.style.opacity=0,tmgAdsLog("Ad is EMPTY we have nothing to transition - "+s.div)):(d.classList.add("is-loaded"),d.classList.remove("is-empty"),"nat"==s.at?(tmgAds.plugins.adamazona9on&&console.log("ADTYPE: ",s),"nat_story_list_onward_mob"==s.natid&&(tmgAdsLog("NATIVE: list component - setting marginTop/marginBottom = -16px"),d.style.marginTop="-16px",d.style.marginBottom="-16px"),"nat_story_sparkbrain_1"!=s.natid&&"nat_story_sparkbrain_2"!=s.natid||("x"==s.vp&&(s.marginBottom="-10px"),"l"==s.vp&&(s.marginBottom="-10px"),"m"==s.vp&&(s.marginBottom="-50px"),"s"==s.vp&&(s.marginBottom="-17px"),"xs"==s.vp&&(s.marginBottom="-17px"),d.style.marginBottom=s.marginBottom,tmgAdsLog("NATIVE:: "+s.natid+" :: vp="+s.vp+" :: setting marginBottom = "+s.marginBottom)),d.style.height="auto"):d.style.height=t.size[1]+"px",d.style.opacity=1,"mpu"!=s.at&&"hpg"!=s.at||"x"!=s.vp&&"l"!=s.vp||(d.style.width=t.size[0]+"px"),tmgAdsLog("Ad is rendered, transition height/opacity")),void 0!==tmgAds.metrics.ads[s.at]&&(tmgAds.metrics.ads[s.at].rendered=tmgAdsTimer(),tmgAds.metrics.ads[s.at].rendertime=Number((tmgAds.metrics.ads[s.at].rendered-tmgAds.metrics.ads[s.at].queued).toFixed(3))),tmgAds.plugins.adviewability&&(console.log("VIEWABILITY: we are testing non-creative-wrapper delivered "),tmgAdsLoadJS("moat-"+s.div,s.moat,{},function(){console.log("VIEWABILITY: Moat")}),tmgAdsLoadJS("ias-"+s.div,s.ias,{},function(){console.log("VIEWABILITY: IAS")}));break;case"impressionViewable":tmgAds.metrics.ads[t.slot.getTargeting("at")].viewable=!0;break;case"slotVisibilityChanged":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t),tmgAds.metrics.ads[t.slot.getTargeting("at")].viewability=t.inViewPercentage,tmgAds.metrics.ads[t.slot.getTargeting("at")].creativeId=t.creativeId,t.inViewPercentage<100&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!1,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("PAUSE ad due to viewability < 100% - ["+t.inViewPercentage+"]")),100==t.inViewPercentage&&tmgAds.config.deliveryModel.sticky&&t.slot.getTargeting("at")==tmgAds.config.deliveryModel.model&&(tmgAds.config.viewportstatus=!0,tmgAdsLog("EVENT: Viewability Changed - "+t.inViewPercentage),tmgAdsLog("START ad has returned to 100%"));break;case"impressionViewable":tmgAdsLog("EVENT: "+e+" lineItemId:"+t.lineItemId+"  -  creativeId:"+t.creativeId+" - size:"+t.size+" - isEmpty:"+t.isEmpty+" - slotContentChanged:"+t.slotContentChanged,t)}}catch(e){tmgAdsLog("ERROR: tmgAdsActionEventHandler() - failed -> error="+e.message,t)}}function tmgAdsInitGeoAPIStatus(e){try{void 0!==window.googletag?e.plugins.gpt.setLocation?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is ACTIVATED for this site - now lets check if the browsers currently supports the Geo-API feature"),1==e.geo.supported?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS supported - now lets check if the browser supports this feature"),1==e.geo.available?(tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS available - setting the following: googletag.setLocation("+e.geo.api.longitude+", "+e.geo.api.latitude+", "+e.geo.api.accuracy+") [longitude,latitude,accuracy]"),googletag.cmd.push(function(){googletag.setLocation(e.geo.api.longitude,e.geo.api.latitude,e.geo.api.accuracy)})):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS NOT available")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS NOT supported.")):tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is NOT ACTIVATED for this site."):tmgAdsLog("tmgAdsGeoAPIStatus: WARNING: googletag obj does not exist")}catch(e){tmgAdsLog("ERROR: tmgAdsInitGeoAPIStatus() - failed -> error="+e.message,event)}}function tmgAdsGetSizeMatrix(){return tmgAdsLog("Called"),{ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],nat:"fluid",com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"}}function tmgAdsGetDFPData(){var e={pos:0,tile:0,adserver:tmgAds.plugins.gpt.servername,networkid:tmgAds.plugins.gpt.networkid,site:tmgAds.page.site,sitename:"tmg.telegraph."+tmgAds.page.site,zonename:tmgAds.page.zone.substr(0,100),sitezone:"tmg.telegraph."+tmgAds.page.site+"/"+tmgAds.page.zone.substr(0,100),ord:Number(new Date)};return tmgAds.plugins.adteston&&(console.log("tmgAdsGetDFPData: adteston has been declared, we now change adunits to tmg.telegraph.test/test"),e.site="test",e.sitename="tmg.telegraph.test",e.zonename="tmg.telegraph.test/test",e.sitezone="tmg.telegraph.test/test"),tmgAdsLog("tmgads.dfp.site     = "+e.site),tmgAdsLog("tmgads.dfp.sitename = "+e.sitename),tmgAdsLog("tmgads.dfp.zonename = "+e.zonename),tmgAdsLog("tmgads.dfp.sitezone = "+e.sitezone),e}function tmgAdsAdjustSizeMapping(){tmgAdsLog("Called"),"puzzles"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizeing values, we are resetting these now -> at=ban -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.x.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.l.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.m.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.s.ban=[[468,60],[728,90],[900,250],[940,250]],tmgAds.plugins.sizemapping.xs.ban=[[468,60],[728,90],[900,250],[940,250]]),"fantasyfootball"==tmgAds.dfp.site&&(tmgAdsLog("ALERT: site is not covered by default sizing values, we are resetting these now -> site="+tmgAds.dfp.site),tmgAds.config.adsizematrix.ban=[728,90],tmgAds.plugins.sizemapping.x.ban=[728,90],tmgAds.plugins.sizemapping.l.ban=[728,90],tmgAds.plugins.sizemapping.m.ban=[728,90],tmgAds.plugins.sizemapping.s.ban=[320,50],tmgAds.plugins.sizemapping.xs.ban=[320,50],tmgAds.config.adsizematrix.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.x.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.l.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.m.mpu=[[300,250],[300,600]],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250]),"courses"!=tmgAds.dfp.site&&"clearing"!=tmgAds.dfp.site||(tmgAds.config.adsizematrix.mpu=[300,250],tmgAds.plugins.sizemapping.x.mpu=[300,250],tmgAds.plugins.sizemapping.l.mpu=[300,250],tmgAds.plugins.sizemapping.m.mpu=[300,250],tmgAds.plugins.sizemapping.s.mpu=[300,250],tmgAds.plugins.sizemapping.xs.mpu=[300,250])}function tmgAdsGetCMS(){tmgAdsLog("Called:");var e="unknown";return tmgAdsLog("ascertaining which CMS is being used"),tmgAdsLog("tmgAds.page.businessseg="+tmgAds.page.businessseg),null===tmgAds.page.businessseg||void 0===tmgAds.page.businessseg?(tmgAdsLog("would appear we are using eScenic"),e="escenic"):(tmgAdsLog("would appear we are using AEM"),e="aem"),tmgAdsLog("returning the following values cms="+e),e}function tmgAdsGetAdobe(){var e={amcv:"unavailable",aam_uuid:"unavailable"};return void 0!==window._satellite?(e.amcv=window._satellite.getVisitorId().getMarketingCloudVisitorID(),e.aam_uuid=tmgAdsGetCookie("aam_uuid")):tmgAdsLog("WARNING:: Adobe _satellite object no available...."),e}function tmgAdsGetGoogleData(){return tmgAdsLog("Called:"),{}}function tmgAdsGetTMGUserData(){tmgAdsLog("Called:");var e={premt:tmgAdsGetMetaTag("DCSext.pd"),premo:tmgAds.page.dataLayer.premiumOverride,premc:tmgAds.page.dataLayer.premiumContent,session:tmgAdsGetCookie("tmg_session"),rem:tmgAdsGetCookie("tmg_rem"),pid:tmgAdsGetCookie("tmg_pid"),p13n:tmgAdsGetCookie("tmg_p13n"),tmg_subs_referer:tmgAdsGetCookie("tmg_subs_referer"),tmg_authz_session:tmgAdsGetCookie("tmg_authz_session"),tmg_meter_count:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_meter_count"),",",":"),tmg_web_trends:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_web_trends"),",",":")};return 0==e.premt?e.premt=!0:e.premt=!1,window.JSON&&void 0!==e.tmg_subs_referer?(tmgAdsLog("window.JSON supported AND tmg_subs_referer cookie exists"),"undefined"!=e.tmg_subs_referer&&(e.tmg_subs_referer=JSON.parse(e.tmg_subs_referer),tmgAdsLog("JSON.parse(tmp.tmg_subs_referer)="+e.tmg_subs_referer))):tmgAdsLog("either window.JSON not supported or no tmg_subs_referer cookie"),e}function tmgAdsGetGPTSetup(e){tmgAdsLog("Called:");var t=e||{};if(t.setTargeting=[],t.setTargetingStr=[],t.customvarstr="",void 0!==tmgAds.dfp.customvars){tmgAdsLog("tmgAds.dfp.customvars exists - iterating through tmgAds.dfp.customvars");for(var s in tmgAds.dfp.customvars)tmgAds.dfp.customvars.hasOwnProperty(s)&&""!==tmgAds.dfp.customvars[s]&&(tmgAds.dfp.customvars[s]instanceof Array?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"] as Array()"),t.setTargeting.push(".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"),t.setTargetingStr+=".setTargeting('"+s+"',tmgAds.dfp.customvars['"+s+"'])"):null!==tmgAds.dfp.customvars[s]?(tmgAdsLog("adding tmgAds.dfp.customvars["+s+"]="+tmgAds.dfp.customvars[s]),t.setTargeting.push(".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"),t.setTargetingStr+=".setTargeting('"+s+"','"+tmgAds.dfp.customvars[s]+"')"):tmgAdsLog("tmgAds.dfp.customvars["+s+"] is null, omitting from tag"),t.customvarstr+="&"+s+"="+tmgAds.dfp.customvars[s])}else tmgAdsLog("tmgAds.dfp.customvars does not exist");return t.customvarstr=t.customvarstr.substring(1),t}function tmgAdsGetGPTCustomVars(){tmgAdsLog("Called:");var e={};return void 0!==tmgAds.about.version&&(e.ver=tmgAds.about.version),void 0!==tmgAds.page.section&&(e.sc=tmgAds.page.section),void 0!==tmgAds.page.pagetype&&(e.pt=tmgAds.page.pagetype),void 0!==tmgAds.page.level&&(e.lvl=tmgAds.page.level),void 0!==tmgAds.browser.biw&&(e.biw=tmgAds.browser.biw),void 0!==tmgAds.browser.bih&&(e.bih=tmgAds.browser.bih),void 0!==tmgAds.browser.language&&(e.lang=tmgAds.browser.language.toLowerCase()),void 0!==tmgAds.flash.versionMaj&&(e.fv=tmgAds.flash.versionMaj),void 0!==tmgAds.plugins.dnt.active&&(e.dnt=tmgAds.plugins.dnt.state),void 0!==tmgAds.page.protocol&&(e.protocol=tmgAds.page.protocol.substring(0,tmgAds.page.protocol.length-1)),void 0!==tmgAds.page.domain&&(e.rd=tmgAds.page.domain),void 0!==tmgAds.page.cms&&(e.cms=tmgAds.page.cms),void 0!==tmgAds.page.keywords&&(e.kw=tmgAds.page.keywords),void 0!==tmgAds.page.geo&&(e.geo=tmgAds.page.geo),void 0!==tmgAds.page.editorschoice&&(e.ec=tmgAds.page.editorschoice),void 0!==tmgAds.page.mostviewed&&(e.mv=tmgAds.page.mostviewed),void 0!==tmgAds.page.mostshared&&(e.ms=tmgAds.page.mostshared),void 0!==tmgAds.page.videosrc&&(e.vidsrc=tmgAds.page.videosrc),void 0!==tmgAds.page.articleid&&(e.pg=tmgAds.page.articleid),void 0!==tmgAds.page.gamp&&(e.gamp=tmgAds.page.gamp),void 0!==tmgAds.page.refresh?e.refresh=tmgAds.page.refresh:e.refresh=0,void 0!==tmgAds.page.docdom&&(e.docdom=tmgAds.page.docdom),void 0!==tmgAds.grapeshot&&(e.gs=tmgAds.grapeshot.dfp),void 0!==tmgAds.layout.platform&&(e.platform=tmgAds.layout.platform),void 0!==tmgAds.layout.viewport&&(e.vp=tmgAds.layout.viewport),void 0!==tmgAds.page.keywords&&(e.kw=tmgAds.page.keywords),void 0!==tmgAds.adsafe.blocked&&(e.adsafe=tmgAds.adsafe.blocked),tmgAds.page.dataLayer.premiumContent?e.premc=tmgAds.page.dataLayer.premiumContent:e.premc="false",tmgAds.page.dataLayer.premiumOverride?e.premo=tmgAds.page.dataLayer.premiumOverride:e.premo="false",tmgAds.tmg.premt?e.premt=tmgAds.tmg.premt:e.premt="false",void 0!==tmgAds.tmg.tmg_meter_count?e.tmgmvc=tmgAds.tmg.tmg_meter_count.vars.meter_viewed_count:e.tmgmvc="none",void 0!==tmgAds.tmg.tmg_meter_count?e.tmgmu=tmgAds.tmg.tmg_meter_count.vars.meter_user_viewed:e.tmgmu="none",void 0!==tmgAds.tmg.tmg_subs_referer?e.tmgsub="1":e.tmgsub="none",void 0!==tmgAds.tmg.pid?e.tmgpid=tmgAds.tmg.pid:e.tmgpid="none",void 0!==tmgAds.adobe.amcv?e.amcv=tmgAds.adobe.amcv:e.amcv="none",void 0!==tmgAds.adobe.aam_uuid?e.aam=tmgAds.adobe.aam_uuid:e.aam="none",void 0!==tmgAds.krux.kxuser.dfp?e.kxuid=tmgAds.krux.kxuser.dfp:e.kxuid="none",void 0!==tmgAds.krux.kxuser.dfp&&tmgAds.plugins.krux.includeinurl?e.kxsid=tmgAds.krux.kxsegs.dfp:e.kxseg="none",!1!==typeof tmgAds.plugins.adtest&&(e.test=tmgAds.plugins.adtest),tmgAds.plugins.adtest&&(e.test=tmgAds.plugins.adtest),tmgAds.plugins.refurl?e.refurl=tmgAds.page.url:e.refurl="inactive",tmgAds.plugins.donottrack?e.dnt=tmgAds.plugins.donottrack:e.dnt="inactive",e.admodel=tmgAds.config.deliveryModel.activityStatus+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle,e.sticky=0,"default"!==tmgAds.config.deliveryModel.activityStatus&&"none"!==tmgAds.config.deliveryModel.activityStatus&&(e.sticky=1),void 0!==tmgAds.optimizely?tmgAds.optimizely.length>0?(tmgAdsLog("OPTIMIZELY: activeExperiments found, adding to the CustVars: "+tmgAds.optimizely),e.optimizely=tmgAds.optimizely):tmgAdsLog("OPTIMIZELY: No activeExperiments found."):tmgAdsLog("OPTIMIZELY: tmgAds.optimizely not defined."),e}function tmgAdsGetAdsafeBlocks(){var e={};return 1==tmgAds.config.adsafe?(tmgAdsLog("tmgAds.config.adsafe = ON"),void 0!==window.tmgAdsafe?(tmgAdsLog("window.tmgAdsafe exists"),void 0!==window.tmgAdsafe.blocked?(tmgAdsLog("window.tmgAdsafe.blocked exists"),tmgAdsLog("adding tmgAdsafe data"),e.blocked=window.tmgAdsafe.blocked):tmgAdsLog("window.tmgAdsafe.blocked does not exists")):tmgAdsLog("window.tmgAdsafe does NOT exist")):tmgAdsLog("tmgAds.config.adsafe = OFF"),e}function tmgAdsLog(e,t){if("undefined"!=typeof tmgAds&&void 0!==tmgAds.plugins&&void 0!==tmgAds.plugins.adconsole&&!0===tmgAds.plugins.adconsole){var s={time:("00"+(tmgAdsTimer()/1e3).toFixed(5)).slice(-9),callee:null,extra:t,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:e};arguments.callee.caller&&(s.callee=arguments.callee.caller.name),s.msg="%c[TMG-GPT]["+s.time+"]["+(s.callee+"                         ").substr(0,25)+"]: "+s.msg,s.styling=s.css.none,"ALERT"==e.substr(0,5)&&(s.styling=s.css.alert),"OPTIMIZELY"==e.substr(0,10)&&(s.styling=s.css.optimizely),"SUCCESS"==e.substr(0,7)&&(s.styling=s.css.success),"ERROR"==e.substr(0,5)&&(s.styling=s.css.error),"WARNING"==e.substr(0,7)&&(s.styling=s.css.warning),"EVENT"==e.substr(0,5)&&(s.styling=s.css.event),"INFO"==e.substr(0,4)&&(s.styling=s.css.info),tmgAds.log.push(s.msg),console.log(s.msg,s.styling)}}function tmgAdsGetObjSize(e){for(var t=[],s=[e],d=0;s.length;){var a=s.pop();if("boolean"==typeof a)d+=4;else if("string"==typeof a)d+=2*a.length;else if("number"==typeof a)d+=8;else if("object"==typeof a&&-1===t.indexOf(a)){t.push(a);for(var i in a)s.push(a[i])}}return d/1024}function tmgAdsGetGeoAPI(){tmgAdsLog("Called:");var e={available:0,supported:0,api:{},position:{}};return tmgAds.plugins.gpt.setLocation?(navigator.geolocation.getCurrentPosition(function(t){e.api=t.coords,e.position=t.coords,e.available=1,e.supported=1,tmgAdsLog("GeoAPI success -> position.coords="+t.coords)},function(t){e.available=0,e.supported=-1,tmgAdsLog("GeoAPI failed: "+t)}),tmgAdsLog("navigator.geolocation supported in this browser")):tmgAdsLog("navigator.geolocation not supported in this browser"),e}function tmgAdsGetKruxData(){tmgAds.plugins.krux.active&&tmgAdsLog("tmgAds.plugins.krux.active = true - Krux is active for this installation",0);var e={};if(void 0!==window.localStorage?(tmgAdsLog("localStorage found, using that"),e.kxtype="localStorage",void 0!==window.localStorage.kxtech&&void 0!==window.localStorage.kxuser&&void 0!==window.localStorage.kxsegs?(e.kxtype="localStorage",e.kxtech=window.localStorage.kxtech,e.kxuser={dfp:window.localStorage.kxuser},e.kxsegs={dfp:[],raw:window.localStorage.kxsegs}):(e.kxtech=null,e.kxuser={dfp:null},e.kxsegs={dfp:[],raw:null})):(tmgAdsLog("localStorage not found, reverting to using cookies"),e.kxtype="cookie",void 0!==tmgAdsGetCookie("kxtech")&&void 0!==tmgAdsGetCookie("kxuser")&&void 0!==tmgAdsGetCookie("kxsegs")?(e.kxtech=tmgAdsGetCookie("kxtech"),e.kxuser={dfp:tmgAdsGetCookie("kxuser")},e.kxsegs={dfp:[],raw:tmgAdsGetCookie("kxsegs")}):(e.kxtech=null,e.kxuser={dfp:null},e.kxsegs={dfp:[],raw:null})),null!==e.kxsegs.raw&&"undefined"!=e.kxsegs.raw&&(e.kxsegs.segids=e.kxsegs.raw.split(",")),tmgAds.plugins.krux.includeinurl)if(tmgAdsLog("tmgAds.plugins.krux.includeinurl = true - realtime segments are turned on - insert the top "+tmgAds.plugins.krux.maxSegs+" segments into the adurls to capture realtime segs in krux",0),void 0!==e.kxsegs.segids){tmgAdsLog("tmp.segids[0] exists",0),e.kxsegs.dfp=[],-1===tmgAds.plugins.krux.maxSegs?(e.maxSegs=e.kxsegs.segids.length,tmgAdsLog("Include ALL Krux Segs into DFP call")):(e.maxSegs=tmgAds.plugins.krux.maxSegs,tmgAdsLog("Limit Krux segs to "+e.maxSegs));for(var t=0;t<e.maxSegs;++t)void 0!==e.kxsegs.segids[t]&&(tmgAdsLog("adding KruxSeg #"+(t+1)+" into URL: "+e.kxsegs.segids[t],0),e.kxsegs.dfp.push(e.kxsegs.segids[t]))}else tmgAdsLog("WARNING: tmp.kxsegs.segids is undefined");return e}function tmgAdsGetMetaTag(e){try{var t=null;if(null!==document.getElementsByName(e)[0]&&void 0!==document.getElementsByName(e)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+e+"): document.getElementsByName('"+e+"')[0] exists"),document.getElementsByName(e)[0].content.length>0&&(t=document.getElementsByName(e)[0].content.toLowerCase(),t="tmgads.articleid"==e?decodeURIComponent(document.getElementsByName(e)[0].content):decodeURIComponent(document.getElementsByName(e)[0].content.toLowerCase()),tmgAdsLog("tmgAdsGetMetaTag("+e+'): "'+t+'"')),"tmgads.keywords"==e)if(null!==t){t=t.split(",");for(var s=0;s<t.length;s++)String.prototype.trim?t[s]=t[s].trim():null!==typeof t[s]?t[s]=t[s].replace(/^\s\s*/,"").replace(/\s\s*$/,""):tmgAdsLog("tmgAdsGetMetaTag("+e+'): tmp[i] is null -> "'+t[s]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+e+'): tmgads.keywords -> "'+t[s]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+e+"): tmgads.keywords -> tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+e+"): document.getElementsByName('"+e+"')[0] does not exist -> "+t);return tmgAds.data.metatags[e]=t,t}catch(t){tmgAdsLog("ERROR: tmgAdsGetMetTag("+e+") failed -> error="+t.message)}}function tmgAdsGetPageData(){try{tmgAdsLog("Called:");var e={zone:"unknown",url:location.protocol+"//"+location.host+location.pathname,url_full:location.href,referrer:document.referrer,docdom:document.domain,domain:location.hostname,protocol:location.protocol,search:location.search,gamp:"0",environment:"-"};return"refresh"===tmgAdsGetURLParam("source",window.location.href)?(e.refresh=1,tmgAdsLog("tmgAdsGetPageData: page is a refreshed page")):tmgAdsLog("tmgAdsGetPageData: page is not refreshed"),"mobile"==tmgAdsGetMetaTag("DCSext.Platform")?e.platform="mobile":e.platform="desktop",tmgAdsLog("tmgAdsGetPageData: platform is: "+e.platform),"mobile"==e.platform?e.pagetype=tmgAdsGetMetaTag("DCSext.Content_Type"):e.pagetype=tmgAdsGetMetaTag("tmgads.pagetype"),tmgAdsLog("tmgAdsGetPageData: pagetype is: "+e.pagetype),"mobile"==e.platform?e.articleid=tmgAdsGetMetaTag("DCSext.articleId"):e.articleid=tmgAdsGetMetaTag("tmgads.articleid"),tmgAdsLog("tmgAdsGetPageData: articleid is: "+e.articleid),"mobile"==e.platform?e.geo=tmgAdsGetMetaTag("DCSext.akamaigeo"):e.geo=tmgAdsGetMetaTag("tmgads.geo"),tmgAdsLog("tmgAdsGetPageData; geo is: "+e.geo),null===e.pagetype&&(e.pagetype="unset"),"mobile"==e.platform?e.zone=tmgAdsGetMetaTag("DCSext.MLC").substring(1,tmgAdsGetMetaTag("DCSext.MLC").length):e.zone=tmgAdsGetMetaTag("tmgads.zone"),null!==typeof e.zone?e.zone=e.zone.replace(/\//g,".").replace(/-/g,"").replace(/_/g,""):(e.zone="unknown",tmgAdsLog("WARNING:::: tmgAdsGetPageData: zone is null, setting to unknown")),tmgAdsLog("tmgAdsGetPageData: zone is: "+e.zone),e.businessseg=tmgAdsGetMetaTag("tmgads.businessSegment"),tmgAdsLog("tmgAdsGetPageData: bsuinessSeg is: "+e.businesssegm),tmgAdsLog("tmgAdsGetMetaTag: Fixing broken classifications"),"lifestyle/puzzles"==e.zone&&(e.zone="puzzles",tmgAdsLog("tmgAdsGetPageData: changed lifestlye/puzzles to puzzles")),null===e.businessseg?tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg is null, use the zone data in it's entirety, NB: we set businesssseg to the site value after this script."):(tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg not null, work out if we need to prepend the businessSeg value to the start of the zone value (only do this if the businessSeg is different from th first zone array value: "),tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg = "+e.businessseg),tmgAdsLog("tmgAdsGetMetaTag; tmp.zone = "+e.zone),e.businessseg==e.zone.split(".")[0]?tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is same as the businessseg so don't do anything to the zone:"):(tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is different from businessseg so prepend this to the zone:"),e.zone=e.businessseg+"."+e.zone),tmgAdsLog("tmgAdsGetMetaTag: tmp.zone value: "+e.zone)),e.zonedata=e.zone.split("."),e.level=e.zonedata.length,e.section=e.zone.replace(/\./g,"-").replace(/_/g,""),e.site=e.zonedata[0],e.businessseg,e.site,e.otherdata="",e.keywords=tmgAdsGetMetaTag("tmgads.keywords"),e.mostshared=tmgAdsGetMetaTag("tmgads.mostshared"),e.mostviewed=tmgAdsGetMetaTag("tmgads.mostviewed"),e.parentid=tmgAdsGetMetaTag("tmgads.parentid"),e.product=tmgAdsGetMetaTag("tmgads.product"),e.sensitive=tmgAdsGetMetaTag("tmgads.sensitive"),e.videosrc=tmgAdsGetMetaTag("tmgads.videosrc"),e.sponsor=tmgAdsGetMetaTag("tmgads.sponsor"),tmgAdsLog("tmgAdsGetMetaTag: Fixing bad page classifications/taxonomies"),("ece_frontpage"==e.section||"ecefrontpage"==e.section)&&(e.section="portal"),("food_and_drink"==e.section||"food-and-drink"==e.section)&&(e.section="foodanddrink"),("food_and_drink"==e.site||"food-and-drink"==e.site)&&(e.site="foodanddrink"),e.dataLayer=window.dataLayer||["UNSET"],e.pageData=window.pageData||["UNSET"],e}catch(e){tmgAdsLog("ERROR: tmgAdsGetPageData() failed -> error="+e.message)}}function tmgAdsGetURLParam(e,t){tmgAdsLog('Called: tmgAdsGetUrlParam("'+e+'","'+t+'")');var s=!1;return"adtest"==e?tmgAdsLog("Setting ADTEST to: "+(s=decodeURI((RegExp(e+"=(.+?)(&|$)").exec(t)||[,null])[1]))):s=window.location.search.indexOf(e)>0,tmgAdsLog("Checking for url-switch ["+e+"] :"+s),s}function tmgAdsGetTMGCookies(e){tmgAdsLog("Called:"),tmgAdsLog("tmgAds.plugins.tmgcookies.active = "+tmgAds.plugins.tmgcookies.active);var t,s="";if(tmgAds.plugins.tmgcookies.active){tmgAdsLog("Adding any tmgcookies");for(var d=document.cookie.split("; "),a=0;a<d.length;a++)d[a].hasOwnProperty(a)&&"tmgads_"===(t=d[a].split("="))[0].substr(0,7)&&t[0].length>0&&(s+=";ck_"+t[0].substr(7,t[0].length-7)+"="+t[1])}return s}function tmgAdsLoadJS(e,t,s){var d={name:e,status:"start",type:"text/javascript",url:t,performance:{loadjsStarted:tmgAdsTimer(),loadjsRequested:0,loadjsLoaded:0}};tmgAdsEvent(e+":"+d.status);var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.onload=function(){d.status="loaded",tmgAdsEvent(e+":"+d.status),d.performance.loadjsLoaded=tmgAdsTimer(),d.performance.loadjsLatency=parseFloat((d.performance.loadjsLoaded-d.performance.loadjsStarted).toFixed(3));for(var t in d.performance)tmgAds.metrics[e+"_"+t]=d.performance[t];"function"==typeof s&&s()},d.status="requested",d.performance.loadjsRequested=tmgAdsTimer(),tmgAdsEvent(e+":"+d.status),a.src=d.url;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i)}function tmgAdsGetBrowserData(){tmgAdsLog("Called:");var e={};for(var t in navigator)if(navigator.hasOwnProperty(t)){var s=navigator[t];"object"!=typeof s&&(e[t]=s)}return document.all?(tmgAdsLog("document.all exists"),e.biw=document.documentElement.offsetWidth,e.bih=document.documentElement.offsetHeight):(tmgAdsLog("document.all does not exists"),e.biw=window.innerWidth,e.bih=window.innerHeight),e.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var d=e.indexOf("Edge/");return d>0&&parseInt(e.substring(d+5,e.indexOf(".",d)),10)}(),e.chromeVer=function(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}(),e.chromeVer?e.isChrome=!0:e.isChrome=!1,e}function tmgAdsFlashDetect(){tmgAdsLog("Called:");return FlashDetect=new function(){var e=this;e.installed=!1,e.raw="",e.major=-1,e.minor=-1,e.revision=-1,e.revisionStr="";var t=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return s(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=s(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return s(e)}}],s=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(e){}return t},d=function(e){var t=-1;try{t=new ActiveXObject(e)}catch(e){t={activeXError:!0}}return t},a=function(e){var t=e.split(",");return{raw:e,major:parseInt(t[0].split(" ")[1],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),revisionStr:t[2]}},o=function(e){var t=e.split(/ +/),s=t[2].split(/\./),d=t[3];return{raw:e,major:parseInt(s[0],10),minor:parseInt(s[1],10),revisionStr:d,revision:n(d)}},n=function(t){return parseInt(t.replace(/[a-zA-Z]/g,""),10)||e.revision};e.majorAtLeast=function(t){return e.major>=t},e.minorAtLeast=function(t){return e.minor>=t},e.revisionAtLeast=function(t){return e.revision>=t},e.versionAtLeast=function(t){var s=[e.major,e.minor,e.revision],d=Math.min(s.length,arguments.length);for(i=0;i<d;i++){if(s[i]>=arguments[i]){if(i+1<d&&s[i]==arguments[i])continue;return!0}return!1}},e.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var s="application/x-shockwave-flash",i=navigator.mimeTypes;if(i&&i[s]&&i[s].enabledPlugin&&i[s].enabledPlugin.description){var n=i[s].enabledPlugin.description,r=o(n);e.raw=r.raw,e.major=r.major,e.minor=r.minor,e.revisionStr=r.revisionStr,e.revision=r.revision,e.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(var n=-1,g=0;g<t.length&&-1==n;g++){var m=d(t[g].name);if(!m.activeXError&&(e.installed=!0,-1!=(n=t[g].version(m)))){r=a(n);e.raw=r.raw,e.major=r.major,e.minor=r.minor,e.revision=r.revision,e.revisionStr=r.revisionStr}}}()},FlashDetect.installed?{versionMaj:FlashDetect.major,versionMin:FlashDetect.minor,versionRev:FlashDetect.revision,versionRaw:FlashDetect.raw}:{versionMaj:0,versionMin:0,versionRev:0,versionRaw:"none"}}function tmgAdsGetCookie(e){tmgAdsLog("Called: tmgAdsGetCookie("+e+"): Called");var t,s,d,a,i=document.cookie.split(";");for(s=0;s<i.length;s++)d=i[s].substr(0,i[s].indexOf("=")),a=i[s].substr(i[s].indexOf("=")+1),(d=d.replace(/^\s+|\s+$/g,""))==e&&(t=decodeURIComponent(a));return t}function tmgAdsSetCookie(e,t,s,d){tmgAdsLog('Called: tmgAdsSetCookie("'+e+'","'+t+'","'+s+'","'+d+'"): Called');var a,i,o,n,r=e+"="+encodeURIComponent(t);s?(i=(a=new Date).getTime(),i+=3600*s*1e3,a.setTime(i),o=";expires="+a.toGMTString()):o="",n=r+o+";path=/"+(void 0===d?"":";domain="+d),document.cookie=n}function tmgAdsTimer(){var e=!1;return e=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(e.toFixed(3))}function tmgAdsGetDoNotTrack(){tmgAdsLog("Called:");var e;return"unspecified"!=navigator.doNotTrack&&1!=navigator.doNotTrack&&"yes"!=navigator.doNotTrack||(tmgAdsLog("using the navigator.doNotTrack method"),e=navigator.doNotTrack),navigator.msDoNotTrack&&(tmgAdsLog("using the navigator.msDoNotTrack method"),e=navigator.msDoNotTrack),void 0===e&&(e=0),"unspecified"==e&&(e=0),"inactive"==e&&(e=0),"no"==e&&(e=0),"yes"==e&&(e=1),e}function tmgAdsCsvToObj(e,t,s){var d;if(tmgAdsLog('Called: data="'+e+'" delimiter="'+t+'" assignment='+s),s=s||"=",void 0!==e){(d={dfplegacy:"",raw:e,vars:{}}).data=e.split(t);for(var a in d.data)if(d.data[a].length>0&&"string"==typeof d.data[a]){var i=d.data[a].split(s);d.vars[i[0]]=i[1],d.dfplegacy+="&"+i[0]+"="+i[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+i[0]+s+i[1])}}return d}function tmgAdsBuildAd(e,t,s){tmgAdsLog("#####################################################################################"),tmgAdsLog('### tmgAdsBuildAd("'+e+'","'+t+'","'+s+'")'),++tmgAds.dfp.tile;var d={adunit:tmgAds.dfp.adunit,altsizes:s,outofpage:!1,arguments:arguments,slot:e.split("_"),size:[],slotid:e,prebid:{hb_data:[],hb_adid:[],hb_size:[],hb_pb:[],hb_rid:[],hb_ttr:[]},customvars:tmgAds.dfp.customvars,customvarstr:"",refreshable:!1,dynmpu:!1,block:!1,div:e,vidid:null,pos:tmgAds.dfp.tile,tile:tmgAds.dfp.tile,ord:Number(new Date),extra:tmgAdsCsvToObj(t,";")};"none"!=tmgAds.config.deliveryModel.activityStatus?d.adcount=1:d.adcount=0,tmgAds.ads[d.pos]={},d.adloc=d.slot[1],d.adtype=d.slot[2],d.slot[3]&&(d.adpos=d.slot[3],d.dynid=d.adpos),"nat"==d.adtype&&(d.natid=document.getElementById(d.div).getAttribute("data-adtype")),(tmgAds.plugins.oopunits.indexOf(d.adtype)>-1||"oop"==d.adpos)&&(d.outofpage=!0),void 0===tmgAds.metrics.tmggptAdFirstAdQueued&&(tmgAdsLog("TMG-ADTECH: First Ad Requested"),tmgAds.metrics.tmggptAdFirstAdQueued=tmgAdsTimer(),tmgAds.metrics.metricTimeToQueueFirstAd=tmgAds.metrics.tmggptAdFirstAdQueued),tmgAds.metrics.tmggptAdLastAdQueued=tmgAdsTimer(),tmgAds.metrics.ads[d.adtype]={queued:tmgAds.metrics.tmggptAdLastAdQueued,viewable:!1,archive:[]},!1!==typeof tmgAds.plugins.adomik.active&&(d.customvars.ad_group=tmgAds.plugins.adomik.getAdGroup(),d.customvars.ad_h=(new Date).getUTCHours());for(var a in d.customvars)d.customvars.hasOwnProperty(a)&&(d.customvarstr+="&"+a+"="+d.customvars[a],tmgAdsLog("KVPs: "+a+"="+d.customvars[a]));if(d.altsizes.length>0){for(tmgAdsLog("Altsizes have been chosen - over-riding the defaults and setting them to: "+d.altsizes),d.oldsizes=d.altsizes.split(","),tmgAdsLog("Altsizes set: "),d.newsizes=[],a=0;a<d.oldsizes.length;a++)""!==d.oldsizes[a]&&d.oldsizes[a].length>=3?(tmgAdsLog("Altsizes: using this value "+d.oldsizes[a]),d.newsizes.push(d.oldsizes[a])):tmgAdsLog('Altsizes: not using this value "'+d.oldsizes[a]+'"');d.sizes=d.newsizes,tmgAdsLog("Altsizes set: ");for(a in d.sizes)d.sizes.hasOwnProperty(a)&&d.size.push([Number(d.sizes[a].split("x")[0]),Number(d.sizes[a].split("x")[1])])}else d.size=tmgAds.plugins.sizemapping[tmgAds.layout.viewport][d.adtype],tmgAdsLog("default sizes have been chosen - sizes are:"+d.size),d.sizemapping=googletag.cmd.push(function(){googletag.sizeMapping().addSize(tmgAds.plugins.sizemapping.x.size,tmgAds.plugins.sizemapping.x[d.adtype]).addSize(tmgAds.plugins.sizemapping.l.size,tmgAds.plugins.sizemapping.l[d.adtype]).addSize(tmgAds.plugins.sizemapping.m.size,tmgAds.plugins.sizemapping.m[d.adtype]).addSize(tmgAds.plugins.sizemapping.s.size,tmgAds.plugins.sizemapping.s[d.adtype]).addSize(tmgAds.plugins.sizemapping.xs.size,tmgAds.plugins.sizemapping.xs[d.adtype]).build()});if("vid"==d.adtype||"ins"==d.adtype||"int"==d.adtype)return"vid"==d.adtype&&(d.tmpsize=tmgAds.plugins.sizemapping[tmgAds.layout.viewport].vid,d.vidslot=d.slotid+"_"+d.pos,tmgAds.plugins.advast4&&(tmgAds.plugins.gpt.vastOutputVersion="xml_vast4"),d.url="https://securepubads.g.doubleclick.net/gampad/ads?env=vp&sz="+d.tmpsize+"&cmsid="+tmgAds.plugins.gpt.ooyalaCMSID+"&vid="+d.vidid+"&gdfp_req=1&impl=s&unviewed_position_start=1&output="+tmgAds.plugins.gpt.vastOutputVersion+"&iu="+d.adunit+"&hl=en&cust_params="+encodeURIComponent(d.customvarstr+"&vidslot="+d.vidslot+"&at="+d.adtype+"&pos="+d.pos+"&adcount="+d.adcount+d.extra.dfplegacy)+"&description_url="+encodeURIComponent(tmgAds.page.url)+"&url="+encodeURIComponent(tmgAds.page.url)+"&ciu_szs=&scp=&scor="+d.pos+"&correlator="+tmgAds.dfp.ord,tmgAds.plugins.headerBidders.indexExchange.active&&tmgAds.plugins.headerBidders.indexExchange.video.active||tmgAds.plugins.adindexvidon?(tmgAds.plugins.adindexvidon&&console.log("VIDEO:: adindexvidon has been turned on via the url"),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: IndexExchange HeaderBidding turned ON"),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: initial ad-request - "+d.url),d.url=tmgAds.plugins.headerBidders.indexExchange.video.url+encodeURIComponent(d.url),tmgAds.plugins.adindexvidon&&console.log("VIDEO:: amended ad-request - "+d.url)):tmgAds.plugins.adindexvidon&&console.log("VIDEO::  IndexExchange HeaderBidding turned OFF"),tmgAdsLog("VIDEO:: AD-URL - "+d.url)),"ins"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord,tmgAdsLog("InSkin Ad Request - URL="+d.url)),"int"==d.adtype&&(d.tmpsize=d.size[0][0]+"x"+d.size[0][1],d.url="https://securepubads.g.doubleclick.net/gampad/adx?sz="+d.tmpsize+"&iu="+tmgAds.dfp.adunit+"&url="+encodeURIComponent(tmgAds.page.url)+"&t="+encodeURIComponent(d.customvarstr+"&at="+d.thisad+"&pos="+d.pos+"&acount="+d.adcount)+"&m=application/javascript&tile="+d.pos+"&c="+tmgAds.dfp.ord,tmgAdsLog("Luxury Interstitial Ad Request - URL="+d.url)),d.fetchUrl=function(){return tmgAds.plugins.adkill?(tmgAdsLog('ALERT: .fetchURL() "adkill" has been selectedi'),""):(tmgAdsLog(".fetchUrl() called for: "+d.slotid+" -> "+d.url),d.url)},d.display=function(){d.fetchUrl()},d;if(tmgAdsLog("adtype="+d.adtype+" -> Current tmgAds.config.deliveryModel.activityStatus="+tmgAds.config.deliveryModel.activityStatus),"m"!=tmgAds.layout.viewport&&"s"!=tmgAds.layout.viewport&&"xs"!=tmgAds.layout.viewport||"story"!=tmgAds.page.pagetype&&"video"!=tmgAds.page.pagetype&&"live"!=tmgAds.page.pagetype||"mpu"!=d.adtype?d.block=!1:d.block=!0,tmgAds.plugins.adSlotRefresh.exemptAdSlots.indexOf(d.adtype)>-1||tmgAds.config.deliveryModel.activityStatus==d.adtype||"none"==tmgAds.config.deliveryModel.activityStatus||tmgAds.config.deliveryModel.exempt.indexOf(d.adtype)>-1){if("dyn"==d.adtype&&tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport))return tmgAdsLog("ALERT: Dynamic MPU slot not rendered as has not met criteria: adpos="+d.pos+" - adtype="+d.adtype+" - viewport="+tmgAds.layout.viewport+" - tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)="+tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d;for(tmgAdsLog("SUCCESS: matched - tmgAds.config.deliveryModel.activityStatus="+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype="+d.adtype),"ban"==tmgAds.config.deliveryModel.activityStatus&&"ban"==d.adtype&&(tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(d.size=[[970,90],[970,66],[728,90],[468,60]]),"m"==tmgAds.layout.viewport&&(d.size=[728,90]),"s"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50]]),"xs"==tmgAds.layout.viewport&&(d.size=[[300,50],[320,50]])),"mpu"==tmgAds.config.deliveryModel.activityStatus&&"mpu"==d.adtype&&("x"==tmgAds.layout.viewport&&(d.size=[[300,250],[300,600]]),"l"==tmgAds.layout.viewport&&(d.size=[[300,250],[300,600]]),tmgAds.layout.viewportHeight<tmgAds.config.deliveryModel.minHeight&&(tmgAdsLog("tmgAds.layout.viewportHeight is less thean the minHeight for certain sticky ads/mpus on this page, restricting to only 300x250"),d.size=[300,250])),d.rawsizes=[],a=0;a<d.size.length;a++)d.rawsizes.push(d.size[a][0]+"x"+d.size[a][1]);return googletag.cmd.push(function(){if(!0===d.outofpage?(tmgAdsLog("OutOfPage unit chosen for: "+d.slotid),d.adslot=googletag.defineOutOfPageSlot(d.adunit,d.div).addService(googletag.pubads())):(tmgAdsLog("Standard Display unit chosen for: "+d.slotid+" sizes: "+d.size),d.adslot=googletag.defineSlot(d.adunit,d.size,d.div).addService(googletag.pubads())),"dyn"==d.adtype&&d.adslot.setTargeting("dynid",d.dynid),"nat"==d.adtype&&d.adslot.setTargeting("natid",d.natid),d.adslot.setTargeting("div",d.div),d.adslot.setTargeting("at",d.adtype),d.adslot.setTargeting("pos",d.pos),d.adslot.setTargeting("adcount",String(d.adcount)),tmgAds.plugins.headerBidders.amazon.exempt.indexOf(d.adtype)>-1);else if(tmgAds.plugins.headerBidders.amazon.active)if(tmgAdsLog("AMAZON: Active and Adtype supported -> "+d.adtype),-1==tmgAds.plugins.headerBidders.amazon.exempt.indexOf(d.adtype))if(tmgAds.headerbidding.amazon.hasOwnProperty("bids"))if(tmgAds.headerbidding.amazon.bids.length>0)for(e=0;e<tmgAds.headerbidding.amazon.bids.length;e++)tmgAds.headerbidding.amazon.status="Bids returned",d.div==tmgAds.headerbidding.amazon.bids[e].slotID&&d.rawsizes.indexOf(tmgAds.headerbidding.amazon.bids[e].size)>-1&&(tmgAds.plugins.adamazona9on&&console.log("AMAZON: tmgAdsBuildAd() - MATCHED size:"+tmgAds.headerbidding.amazon.bids[e].size+" - "+d.adtype,d.rawsizes),d.adslot.setTargeting("amznbid",tmgAds.headerbidding.amazon.bids[e].amznbid),d.adslot.setTargeting("amzniid",tmgAds.headerbidding.amazon.bids[e].amzniid),d.adslot.setTargeting("amznp",tmgAds.headerbidding.amazon.bids[e].amznp),d.adslot.setTargeting("amznsz",tmgAds.headerbidding.amazon.bids[e].size),d.adslot.setTargeting("amznresp","bids"));else tmgAds.headerbidding.amazon.status="No bids returned",d.adslot.setTargeting("amznresp","nobids"),tmgAds.plugins.adamazona9on&&tmgAdsLog("AMAZON: WARNING - Auction completed but Bids array is empty -> "+d.div),tmgAdsLog("AMAZON: WARNING - Auction completed but Bids array is empty -> "+d.div);else tmgAds.headerbidding.amazon.status="Failed to return bids in time",d.adslot.setTargeting("amznresp","fail"),tmgAds.plugins.adamazona9on&&tmgAdsLog("AMAZON: WARNING - Bids array does not exist, auction may not have returned in time -> "+d.div),tmgAdsLog("AMAZON: WARNING - Bids array does not exist, auction may not have returned in time -> "+d.div);else tmgAdsLog("AMAZON-A9: This adtype is NOT supported (exempted): "+d.adtype);else tmgAdsLog("AMAZON-A9: Not active");if(!tmgAds.plugins.headerBidders.prebid.active&&!tmgAds.plugins.adprebidon||tmgAds.plugins.adprebidoff)tmgAdsLog("PREBID: Inactive");else if(tmgAdsLog("PREBID: Active"),-1==tmgAds.plugins.headerBidders.prebid.exempt.indexOf(d.adtype)){tmgAdsLog("PREBID: Adtype supported -> "+d.adtype),d.adslot.setTargeting("hb_bidder","appnexusGMSM"),d.adslot.setTargeting("hb_status",tmgAds.plugins.headerBidders.prebid.bidstatus);for(var e in tmgAds.headerbidding.prebid.bids){if(d.div==e){tmgAdsLog("PREBID: Adtype matched ["+e+"]",tmgAds.headerbidding.prebid.bids[e]);for(var t in tmgAds.headerbidding.prebid.bids[e].bids)d.rawsizes.indexOf(tmgAds.headerbidding.prebid.bids[e].bids[0].adserverTargeting.hb_size)>=0&&(tmgAdsLog("PREBID:"+tmgAdsTimer()+": "+d.div+" -> Bid Injected ["+tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_size+"]",tmgAds.headerbidding.prebid.bids[e].bids[t]),d.prebid.tmp=tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_size+"_"+tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_adid+"_"+tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_pb+"_"+tmgAds.headerbidding.prebid.bids[e].bids[t].requestId+"_"+tmgAds.headerbidding.prebid.bids[e].bids[t].timeToRespond,d.prebid.hb_data.push(d.prebid.tmp),d.prebid.hb_size.push(tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_size),d.prebid.hb_adid.push(tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_adid),d.prebid.hb_pb.push(tmgAds.headerbidding.prebid.bids[e].bids[t].adserverTargeting.hb_pb),d.prebid.hb_rid.push(tmgAds.headerbidding.prebid.bids[e].bids[t].requestId),d.prebid.hb_ttr.push(tmgAds.headerbidding.prebid.bids[e].bids[t].timeToRespond))}tmgAdsLog(d.div,d.prebid)}d.adslot.setTargeting("hb_size",d.prebid.hb_size),d.adslot.setTargeting("hb_adid",d.prebid.hb_adid),d.adslot.setTargeting("hb_pb",d.prebid.hb_pb),d.adslot.setTargeting("hb_rid",d.prebid.hb_rid),d.adslot.setTargeting("hb_ttr",d.prebid.hb_ttr),d.adslot.setTargeting("hb_data",d.prebid.hb_data)}else tmgAdsLog("PREBID: Adtype exempted -> "+d.adtype);for(e in tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[e]&&d.adslot.setTargeting(e,tmgAds.dfp.customvars[e]);for(e in d.extras)null!==typeof d.extras[e]&&d.adslot.setTargeting(e,d.extras[e]);for(e in d.extra.vars)tmgAdsLog('extra vars have been set, itterating through them now. Adding extra vars: ["'+e+'","'+d.extra.vars[e]+'"]'),d.adslot.setTargeting(e,d.extra.vars[e]);1==tmgAds.plugins.gpt.collapseEmptyDivs&&(tmgAdsLog("setCollapseEmptyDiv is active for: "+d.slotid),d.adslot.setCollapseEmptyDiv(!0)),googletag.enableServices()}),tmgAds.ads[d.pos]=d,d.display=function(){return tmgAdsLog(".display() called for: "+d.slotid),googletag.cmd.push(function(){"vid"!==d.adtype?tmgAds.plugins.headerBidders.active&&"vid"!==d.adtype&&void 0!==window.headertag?tmgAds.plugins.headerBidders.indexExchange.active&&void 0!==window.headertag&&!0===window.headertag.apiReady?(tmgAdsLog("headertag.display exists:"),headertag.display(d.slotid)):(tmgAdsLog("headertag.display does not yet exist... reverting to googletag.display()"),googletag.display(d.slotid),tmgAds.errors.push("INDEX-EXCHANGE: headertag.apiReady = false: "+e)):(googletag.display(d.slotid),tmgAds.plugins.headerBidders.active&&tmgAds.plugins.headerBidders.indexExchange.active&&void 0===window.headertag&&console.log("::::WARNING:::: headertag not defined!")):tmgAdsLog('.display() method called on "vid" adtype... ignoring')}),d},d.refresh=function(){console.log(".refresh() called for slotid :"+d.slotid),googletag.cmd.push(function(){tmgAds.plugins.headerBidders.active?tmgAds.plugins.headerBidders.indexExchange.active?headertag.pubads().refresh([d.adslot]):googletag.pubads().refresh([d.adslot]):googletag.display(d.slotid)})},tmgAds.adslots[d.slotid]=d,!0===tmgAds.plugins.adkill?(tmgAdsLog('ALERT: "adkill" has been selected, so bailing here and not sending you an ad...'),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d):d}return tmgAds.config.deliveryModel.activityStatus!=d.adtype&&tmgAdsLog("ALERT: not matched - tmgAds.config.deliveryModel.activityStatus="+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype="+d.adtype+" so we did not call this ad."),tmgAds.plugins.dynad.active&&-1==tmgAds.plugins.dynad.viewports.indexOf(tmgAds.layout.viewport)&&tmgAdsLog("ALERT: Dynmic MPU not called - not matched viewport"),d.refresh=function(){return d},d.display=function(){return d},d.fetchUrl=function(){return d},d}function tmgAdsBuildAdTag(e,t,s,d,a,i,o){tmgAdsLog("-=-=-=--=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="),tmgAdsLog('WARNING: DEPRECATED tmgAdsBuildAdTag("'+e+'","'+t+'","'+s+'","'+d+'","'+a+'")');var n={tile:++tmgAds.dfp.tile,adslot:e.split(","),sizes:t.split(","),thisad:e.split(",")[0].substr(0,3),sz:[],type:s,extra:{data:d,vars:{},dfp:""},style:a,refresh:i,refreshtime:o};if("mob"==n.thisad&&(n.thisad="ban"),n.id_div="tmgads_legacy_"+n.thisad+"_"+n.tile,n.extra.data.length>0){n.extra.tmp=n.extra.data.split(";");for(var r in n.extra.tmp)if(n.extra.tmp[r].length>0){var g=n.extra.tmp[r].split("=");n.extra.vars[g[0]]=g[1],n.extra.dfp+="&"+g[0]+"="+g[1],tmgAdsLog("extra custVars set in function call, creating them now -> "+g[0]+"="+g[1])}}return"ins"!=n.thisad&&"vid"!=n.thisad&&"int"!=n.thisad?n.output='<div id="'+n.id_div+'"><script type="text/javascript">tmgAds.cmd.push(function(){var '+n.id_div+' = tmgAdsBuildAd("'+n.id_div+'","'+n.extra.data+'","'+t+'","0").display();});<\/script></div>\n':n.output=googletag.cmd.push(tmgAdsBuildAd(n.id_div,n.extra.data,t,0).fetchUrl()),--tmgAds.dfp.tile,n.output}function tmgAdsRefreshAd(e,t,s){var d={};tmgAdsLog("Called: Refreshing ad["+s+"]: "+t),tmgAds.ads[s].hasOwnProperty("adslot")?(tmgAdsLog("Refreshing ad: googletag.pubads().refresh(["+e+"]);"),googletag.cmd.push(function(){tmgAdsLog("Updating setTargeting values:"),e.setTargeting("adcount",[tmgAds.refreshTimers[t].adcount]),tmgAdsLog("Updating setTargeting values-> adcount="+tmgAds.refreshTimers[t].adcount);for(var s in tmgAds.dfp.customvars)null!==typeof tmgAds.dfp.customvars[s]&&(e.setTargeting(s,tmgAds.dfp.customvars[s]),tmgAdsLog("Updating setTargeting values -> "+s+"="+tmgAds.dfp.customvars[s]));for(s in tmgAds.metrics.ads[t])"object"!=typeof tmgAds.metrics.ads[t][s]&&(d[s]=tmgAds.metrics.ads[t][s],delete tmgAds.metrics.ads[t][s]);tmgAds.metrics.ads[t].archive.push(d),tmgAds.metrics.ads[t].queued=tmgAdsTimer(),tmgAds.plugins.headerBidders.active?(tmgAdsLog("tmgAds.plugins.headerBidders.active is ON"),tmgAds.plugins.headerBidders.indexExchange.active?headertag.pubads().refresh([e]):googletag.pubads().refresh([e])):(tmgAdsLog("tmgAds.plugins.headerBidders.active is OFF"),googletag.pubads().refresh([e]))})):tmgAdsLog("adslot does not exist: googletag.pubads().refresh(["+e+"]);")}function tmgAdsCountdown(e,t){tmgAdsLog("Called: slotID:"+e+"  adtype:"+t+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[t].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[t].currentCount+"  adcount:"+tmgAds.refreshTimers[t].adcount),tmgAds.refreshTimers[t].currentCount>0?!0===tmgAds.config.viewportstatus?(tmgAdsLog("Countdown not finished, reducing countdown by 1s :: adtype:"+t+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[t].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[t].currentCount+"  adcount:"+tmgAds.refreshTimers[t].adcount),2==tmgAds.refreshTimers[t].currentCount&&tmgAdsEvent("headerbid:reload"),--tmgAds.refreshTimers[t].currentCount):tmgAdsLog("tmgAds.config.viewportstatus="+tmgAds.config.viewportstatus+" - window is not active, so countdown remains at "+tmgAds.refreshTimers[t].currentCount+"s"):tmgAdsLog("Countdown finished, - ad is ready to refresh - waiting for the user to interact with the page before we refresh ads.")}function tmgAdsScheduleRefreshableAds(e,t,s){function d(d){0===tmgAds.refreshTimers[e].currentCount&&!1===tmgAds.refreshTimers[e].refreshStatus?(tmgAds.refreshTimers[e].refreshStatus=!0,tmgAdsLog("REFRESH: Refreshing: "+s),(0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[e].adcount)&&(document.getElementById(s).style.opacity="0"),setTimeout(function(){tmgAdsLog("User has interacted with page and therefore is now active - event.type="+d.type+"  -  count is 0... lets refrsh some ads:"),tmgAdsLog("Firstly, lets remove the existing countdownID: "+tmgAds.refreshTimers[e].countdownID),window.clearInterval(tmgAds.refreshTimers[e].countdownID),0===tmgAds.config.deliveryModel.refreshCycle||tmgAds.config.deliveryModel.refreshCycle>tmgAds.refreshTimers[e].adcount?(tmgAdsLog("SUCCESS: We can refresh this ad as there is either no limit on number of refreshed ads or we have delivered less than the current limit"),tmgAdsLog("tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),tmgAdsLog("Incrementing tmgAds.refreshTimers["+e+"].adcount to: "+ ++tmgAds.refreshTimers[e].adcount),tmgAdsLog("Creating a new countdownID"),tmgAds.refreshTimers[e].countdownID=setInterval(function(){tmgAdsCountdown(tmgAds.ads[t].adslot,e)},1e3),tmgAdsLog("CSS transitions fadeout - Countdown has reached 1s to go... we need to start transitioning the look/feel of this unit by fading out the adslot..."),tmgAdsLog("Resetting the countdown"),tmgAds.refreshTimers[e].currentCount=tmgAds.config.deliveryModel.refreshRate/1e3,tmgAdsLog("Requesting Ad refresh - adtype:"+e+" countdownID:"+tmgAds.refreshTimers[e].countdownID+" adID="+t),tmgAds.refreshTimers[e].refreshStatus=!1,"click"!=d.type?(tmgAdsLog("Event is NOT a click event, so we can happily refresh this ad now."),tmgAdsRefreshAd(tmgAds.refreshTimers[e].slotID,e,t)):tmgAdsLog("Event is a CLICK event, we do not refresh based on these as they can overinflate delivery attempts.")):(tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle has been met."),tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle = "+tmgAds.config.deliveryModel.refreshCycle),tmgAdsLog("ALERT: tmgAds.refreshTimers["+e+"].adcount = "+tmgAds.refreshTimers[e].adcount),tmgAdsEvent("ban"==e&&"index"==tmgAds.page.pagetype?"tmggpt-revertStickyBanner":"tmggpt-collapseStickyAdslot"))},1e3)):tmgAdsLog(0==tmgAds.refreshTimers[e].currentCount?"User has interacted with page: event.type="+d.type+" : tmgAds.refreshTimers[adtype].currentCount="+tmgAds.refreshTimers[e].currentCount+"  -  BUT sticky-ad refresh has now been disabled due to hitting refreshlimits":"User has interacted with page: event.type="+d.type+" : tmgAds.refreshTimers[adtype].currentCount="+tmgAds.refreshTimers[e].currentCount+"s")}tmgAds.refreshTimers[e]={slotID:tmgAds.ads[t].adslot,duration:tmgAds.config.deliveryModel.refreshRate/1e3,currentCount:tmgAds.config.deliveryModel.refreshRate/1e3,refreshStatus:!1,adcount:1,countdownID:setInterval(function(){tmgAdsCountdown(tmgAds.ads[t].adslot,e)},1e3)},document.addEventListener("focus",function(e){d(e)}),document.addEventListener("orientationchange",function(e){d(e)}),document.addEventListener("keydown",function(e){d(e)}),document.addEventListener("scroll",function(e){d(e)}),document.addEventListener("resize",function(e){d(e)}),document.addEventListener("mousemove",function(e){d(e)}),document.addEventListener("mousewheel",function(e){d(e)}),document.addEventListener("DOMMouseScroll",function(e){d(e)})}function tmgAdsSetAdSlotToRefresh(e){if(tmgAds.counters=tmgAds.counters||{},tmgAds.counters.hasOwnProperty(e)||(tmgAds.counters[e]=0),Object.keys(tmgAds.ads).length>0&&tmgAds.plugins.adSlotRefresh.active&&tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit){tmgAdsLog("SUCCESS: Ads seem to have been defined AND retryCount <= retryLimit: tmgAds.plugins.stadSlotRefresh.retryCount="+tmgAds.plugins.adSlotRefresh.retryCount+"   tmgAds.plugins.adSlotRefresh.retryLimit="+tmgAds.plugins.adSlotRefresh.retryLimit);var t="none";for(var s in tmgAds.ads)if(tmgAds.ads.hasOwnProperty(s)){if(tmgAds.ads[s].adtype==e){tmgAdsLog("SUCCESS: tmgads.ads["+s+"].adtype = "+e),t=s;break}tmgAdsLog("FAILURE: tmgads.ads["+s+"].adtype != "+e)}else tmgAdsLog("FAILURE: tmgads.hasOwnProperty("+s+") - no hasOwnProperty exixts");"none"==t?(tmgAdsLog("Ad not found ["+e+"] perhaps its not beeing created yet. Number of times this script has been run for this ad -> "+tmgAds.counters[e]),tmgAds.counters[e]<tmgAds.plugins.counters?(++tmgAds.counters[e],console.log("REFRESH: Refresh count limit not hit lets call this script again"),window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)):console.log("REFRESH: Refresh count limit hit, stop trying to fill this slot and stop running this script.")):tmgAds.ads[t].adtype==e&&("object"==typeof tmgAds.ads[t].adslot?(tmgAdsLog("SUCCESS: calling tmgAdsScheduleRefreshableAds("+e+")"),tmgAdsScheduleRefreshableAds(e,t,tmgAds.ads[t].div)):(tmgAdsLog("ALERT: delaying implementing refreshables until the adslots are available - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - retryCount:"+tmgAds.plugins.adSlotRefresh.retryCount+" of "+tmgAds.plugins.adSlotRefresh.retryLimit),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit?(++tmgAds.plugins.adSlotRefresh.retryCount,window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)):tmgAdsLog("ALERT: tmgAdsSetAdSlotToRefresh request limit hit")))}else++tmgAds.plugins.adSlotRefresh.retryCount,tmgAdsLog("ALERT: the tmgAds.ads object does not exist or is empty, ads have not been created yet - recalling tmgAdsSetAdSlotToRefresh("+e+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - incrementing count to: "+tmgAds.plugins.adSlotRefresh.retryCount),tmgAds.plugins.adSlotRefresh.retryCount<=tmgAds.plugins.adSlotRefresh.retryLimit&&window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(e)},tmgAds.plugins.adSlotRefresh.retryPeriod)}function tmgAdsOnPageLoad(e){if(tmgAdsEvent("tmggpt:pageload"),tmgAdsLog("##################################################################################################################"),tmgAdsLog("P A G E   L  O A D E D "),tmgAdsLog("##################################################################################################################"),window.addEventListener("focus",function(){e.config.viewportstatus=!0,tmgAdsLog("AutoRefresh Event: window.onfocus - tmgAds.config.viewportstatus="+e.config.viewportstatus)}),window.addEventListener("blur",function(){e.config.viewportstatus=!1,tmgAdsLog("AutoRefresh Event: window.onblur - tmgAds.config.viewportstatus="+e.config.viewportstatus)}),e.plugins.scrollspeed){tmgAdsLog("We have turned on scrollspeed assessment");var t=function(e){function t(){s=null,i=0}var s,d,a,i,o=(e=e||{}).delay||50;return t(),function(){return d=window.scrollY,null!==s&&(i=d-s),s=d,clearTimeout(a),a=setTimeout(t,o),i}}();window.onscroll=function(){console.log("ScrollSpeed: "+t())}}for(tmgAdsLog("Executing tmgAds.cmd queue:"),tmgAdsEvent("tmggpt:commandqueue");tmgAds.cmd.length>0;)tmgAdsLog("Executing tmgAds.cmd queue: "+tmgAds.cmd.slice(0,1)),tmgAds.cmd.shift()();return!0}function tmgAdsEvent(e,t){var s="tmgAds:"+e,d=new CustomEvent(s);document.dispatchEvent(d)}function tmgAdsInitDeliveryModel(e){try{if(tmgAdsLog("Called tmgAdsInitDeliveryModel"),e.config.deliveryModel=tmgAds.plugins.models.default,e.config.deliveryModel.matched=!1,e.plugins.adstickyon&&(e.sticky=!0),e.plugins.adstickyoff&&(e.sticky=!1),e.sticky){tmgAdsLog("tmgAdsInitDeliveryModel: tmgAds.sticky is TRUE");for(var t in e.plugins.models)if(e.plugins.models.hasOwnProperty(t)&&e.page.pagetype==t){tmgAdsLog("tmgAdsInitDeliveryModel: matched pagetype -> "+t);for(var s in e.plugins.models[t])e.plugins.models[t][s].hasOwnProperty("viewport")&&e.plugins.models[t][s].viewport==e.layout.viewport&&(e.config.deliveryModel=e.plugins.models[t][s],e.config.deliveryModel.matched=!0,tmgAdsLog("tmgAdsInitDeliveryModel: matched viewport -> "+e.plugins.models[t][s].viewport),"none"!=e.config.deliveryModel.model?e.plugins.adSlotRefresh.pagetypes.indexOf(e.page.pagetype)>-1?"ban"==e.config.deliveryModel.model&&e.browser.isIE&&!e.plugins.adiesticky?(console.log("WARNING: Not implementing sticky banners on IE browsers"),e.config.deliveryModel.activityStatus="none"):"ban"==e.config.deliveryModel.model&&e.browser.isChrome&&e.browser.chromeVer<=55?(console.log("WARNING: Not implementing sticky banners on Chrome version <=55"),e.config.deliveryModel.activityStatus="none"):(tmgAdsLog("tmgAdsInitDeliveryModel: page is sutiable for sticky ad model, setting vars now."),e.config.deliveryModel.ruleName=e.page.pagetype+"-"+e.config.deliveryModel.model+"-"+e.config.deliveryModel.minHeight+"-"+e.config.deliveryModel.refreshRate+"-"+e.config.deliveryModel.refreshCycle,e.config.deliveryModel.sticky=!0,e.config.deliveryModel.activityStatus=e.config.deliveryModel.model,tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)):(tmgAdsLog('ALERT: tmgAdsInitDeliveryModel: page is exempted from sticky ads in the tmgAds.config.models. tmgAds.plugins.adSlotRefresh.pagetypes.indexOf("'+tmgAds.page.pagetype+'");'),e.config.deliveryModel.activityStatus="none"):(tmgAdsLog("ALERT: tmgAdsInitDeliveryModel: tmgAds.page.pagetype is not suitable for sticky ads -> setting tmgAds.config.deliveryModel.activityStatus = none"),e.config.deliveryModel.activityStatus="none"))}}else tmgAdsLog("tmgAdsInitDeliveryModel: tmgAds.sticky is FALSE"),tmgAds.config.deliveryModel.activityStatus="none"}catch(t){tmgAdsLog("ERROR: tmgAdsInitDeliveryModel failed -> error="+t.message,e)}tmgAdsLog("tmgAdsInitDeliveryModel = ",e.config.deliveryModel)}function tmgAdsInitHeaderBidders(e){tmgAdsEvent("headerbid:start"),!e.plugins.headerBidders.active&&!e.plugins.adheaderbidon||e.plugins.adheaderbidoff?e.plugins.adheaderbidoff?console.log("headerBidding: INACTIVE due to being turned off via the url-param: adheaderbidoff"):console.log("headerBidding: INACTIVE"):(tmgAdsLog("headerBidding is ACTIVE"),e.plugins.headerBidders.indexExchange.active?(tmgAdsLog("indexExchange is ACTIVE"),e.plugins.headerBidders.indexExchange.bidstatus="init",window.headertag=window.headertag||{},window.headertagconfig={siteId:e.plugins.headerBidders.indexExchange.siteId,timeout:e.plugins.headerBidders.indexExchange.timeout,partners:{INDX:{targetingType:e.plugins.headerBidders.indexExchange.partners.INDX.targetingType,timeout:e.plugins.headerBidders.indexExchange.partners.INDX.timeout}},callbackFn:function(){tmgAdsLog("IndexExchange: headerbidding bids returned"),e.metrics.indexexchange_bidsReceived=tmgAdsTimer(),e.plugins.headerBidders.indexExchange.bidstatus="received"}},-1==window.location.search.indexOf("adixtest")?tmgAds.plugins.headerBidders.indexExchange.jstag=tmgAds.plugins.headerBidders.indexExchange.jsprod:tmgAds.plugins.headerBidders.indexExchange.jstag=tmgAds.plugins.headerBidders.indexExchange.jstest,tmgAdsLog("HEADERBIDDING: IndexExchange - load PRODUCTION tag: "+tmgAds.plugins.headerBidders.indexExchange.jstest),e.plugins.headerBidders.indexExchange.bidstatus="sent",tmgAdsLoadJS(tmgAds.plugins.headerBidders.indexExchange.name,tmgAds.plugins.headerBidders.indexExchange.jstag,window.headertagconfig.callbackFn)):e.plugins.adheaderbidoff?console.log("indexExchange is INACTIVEi due to being turned off via the url-param: adheaderbidoff"):tmgAdsLog("indexExchange is INACTIVE"),e.plugins.headerBidders.amazon.active||e.plugins.adamazona9on?(e.plugins.adamazona9on&&console.log("HEADERBID: AmazonA9 has been manually turned on"),tmgAdsLog("AMAZON: is ACTIVE"),window.amznads=window.amznads||{},window.amznads.asyncParams={id:tmgAds.plugins.headerBidders.amazon.siteId,callbackFn:function(){apstag.init({pubID:e.plugins.headerBidders.amazon.siteId,adServer:e.plugins.headerBidders.amazon.adserver}),apstag.fetchBids(tmgAdsGetAmazonSlots(tmgAds),function(e){tmgAdsPerf("mark",["amazon_bidsReceived"]),tmgAds.metrics.amazon_bidsReceieved=tmgAdsTimer(),tmgAds.headerbidding.amazon={bids:e};for(var t=0;t<e.length;t++)tmgAdsLog("AMAZON: Bid-Response: ",results[t])})}},-1==window.location.search.indexOf("adamzntest")?tmgAds.plugins.headerBidders.amazon.jstag=tmgAds.plugins.headerBidders.amazon.jsprod:tmgAds.plugins.headerBidders.amazon.jstag=tmgAds.plugins.headerBidders.amazon.jstest,tmgAdsLoadJS(tmgAds.plugins.headerBidders.amazon.name,tmgAds.plugins.headerBidders.amazon.jstag,window.amznads.asyncParams.callbackFn)):tmgAdsLog("AMAZON: is INACTIVE"),!tmgAds.plugins.headerBidders.prebid.active&&!tmgAds.plugins.adprebidon||tmgAds.plugins.adprebidoff?tmgAdsLog("Prebid.js is INACTIVE"):(tmgAdsLog("Prebid.js is ACTIVE"),window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.PREBID_TIMEOUT=e.plugins.headerBidders.prebid.timeout,e.plugins.headerBidders.prebid.bidstatus="init",e.headerbidding.prebid={},tmgAdsLog("Prebid.js: we need to set this -> googletag.pubads().disableInitialLoad();"),pbjs.que.push(function(){pbjs.onEvent("auctionInit",function(){tmgAdsPerf("mark",["prebid_auctionInit"])}),pbjs.onEvent("auctionEnd",function(){tmgAdsPerf("mark",["prebid_auctionEnd"])}),pbjs.onEvent("bidAdjustment",function(){tmgAdsPerf("mark",["prebid_bidAdjustment"])}),pbjs.onEvent("bidTimeout",function(){tmgAdsPerf("mark",["prebid_bidTimeout"])}),pbjs.onEvent("bidRequested",function(){tmgAdsPerf("mark",["prebid_bidRequested"])}),pbjs.onEvent("bidResponse",function(){tmgAdsPerf("mark",["prebid_bidResponse"])}),pbjs.onEvent("bidWon",function(){tmgAdsPerf("mark",["prebid_bidWon"])}),pbjs.onEvent("setTargeting",function(){tmgAdsPerf("mark",["prebid_setTargeting"])}),pbjs.onEvent("requestBids",function(){tmgAdsPerf("mark",["prebid_requestBids"])})}),pbjs.que.push(function(){e.plugins.headerBidders.prebid.bids=tmgAdsPrebidReturnAdUnits(),pbjs.addAdUnits(e.plugins.headerBidders.prebid.bids),setTimeout(function(){e.plugins.headerBidders.prebid.timeouthit=!0,"sent"==e.plugins.headerBidders.prebid.bidstatus&&(e.plugins.headerBidders.prebid.bidstatus="timeout")},window.PREBID_TIMEOUT),pbjs.requestBids({bidsBackHandler:function(t){"timeout"!=tmgAds.plugins.headerBidders.prebid.bidstatus&&(tmgAds.plugins.headerBidders.prebid.bidstatus="received"),tmgAds.headerbidding.prebid.bids=t,tmgAds.metrics.metricPrebidTimeToLoad=e.metrics.prebid_bidResponse-e.metrics.prebid_loadjsStarted,emgAds.metrics.prebid_bidResponses=tmgAdsTimer()}})}),-1==window.location.search.indexOf("adamzntest")?tmgAds.plugins.headerBidders.prebid.jstag=tmgAds.plugins.headerBidders.prebid.jsprod:tmgAds.plugins.headerBidders.prebid.jstag=tmgAds.plugins.headerBidders.prebid.jstest,e.plugins.headerBidders.prebid.bidstatus="sent",tmgAdsLoadJS(tmgAds.plugins.headerBidders.prebid.name,tmgAds.plugins.headerBidders.prebid.jstag,function(){}))),tmgAdsEvent("headerbid:end")}function tmgAdsPrebidReturnAdUnits(){var e={adUnits:[]};return"x"!=tmgAds.layout.viewport&&"l"!=tmgAds.layout.viewport||("index"==tmgAds.page.pagetype?(e.adUnits.push({code:"advert_tmg_ban",sizes:[[970,250]],bids:[{bidder:"appnexus",params:{placementId:"12618727"}}]}),e.adUnits.push({code:"advert_tmg_ban",sizes:[[728,90]],bids:[{bidder:"appnexus",params:{placementId:"12536288"}}]}),e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,600]],bids:[{bidder:"appnexus",params:{placementId:"12427874"}}]}),e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12536287"}}]})):(e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,600]],bids:[{bidder:"appnexus",params:{placementId:"12427874"}}]}),e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12536287"}}]}))),"m"==tmgAds.layout.viewport&&("index"==tmgAds.page.pagetype?e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12674818"}}]}):e.adUnits.push({code:"advert_tmg_dyn_0",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12674818"}}]})),"xs"!=tmgAds.layout.viewport&&"s"!=tmgAds.layout.viewport||("index"==tmgAds.page.pagetype?e.adUnits.push({code:"advert_tmg_mpu",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12674818"}}]}):e.adUnits.push({code:"advert_tmg_dyn_0",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"12427875"}}]})),e.adUnits}function tmgAdsGetAmazonSlots(){var e={viewport:tmgAds.layout.viewport,sizemap:tmgAds.plugins.sizemapping[tmgAds.layout.viewport],adunit:tmgAds.dfp.adunit};"index"==tmgAds.page.pagetype||"topic"==tmgAds.page.pagetype||"video-index"==tmgAds.page.pagetype?e.slots={x:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],l:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]}:"story"==tmgAds.page.pagetype||"live"==tmgAds.page.pagetype||"video"==tmgAds.page.pagetype||"gallery"==tmgAds.page.pagetype?e.slots={x:["advert_tmg_mpu"],l:["advert_tmg_mpu"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]}:e.slots={x:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],l:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],m:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg"],s:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"],xs:["advert_tmg_ban","advert_tmg_mpu","advert_tmg_hpg","advert_tmg_dyn_0","advert_tmg_dyn_1","advert_tmg_dyn_2"]},e.adslots=e.slots[e.viewport],e.outputArray=[];for(var t=0;t<e.adslots.length;t++){tmgAdsLog("Adding this slot to the bids requested from Amazon: "+e.adslots[t]);var s=e.adslots[t].split("_")[2];e.item={slotID:e.adslots[t],slotName:e.adunit,sizes:e.sizemap[s]},e.outputArray.push(e.item)}return e.output={slots:e.outputArray},e.output}function tmgAdsThrottle(e,t){t=t||tmgAds.plugins.lazyLoad.delayCall;var s,d;return function(){var a=this,i=+new Date,o=arguments;s&&i<s+t?(clearTimeout(d),d=setTimeout(function(){s=i,e.apply(a,o)},t)):(s=i,e.apply(a,o))}}function tmgAdsElementIsInView(e,t){var s=[{left:0,right:0,top:0,bottom:0},t].reduce(function(e,t){return Object.keys(t).forEach(function(s){e[s]=t[s]}),e},{}),d=e.getBoundingClientRect(),a=window.innerHeight,i=window.innerWidth,o=d.top+s.top,n=d.bottom-s.bottom,r=d.left-s.left,g=d.right+s.right,m=o<a&&n>0,l=r<i&&g>0;return m&&l}function tmgAdsElementInView(e,t,s){var d=e.id.split("_"),a="unknown";a="dyn"==d[2]?d[2]+d[3]:d[2];var i=!1;tmgAdsElementIsInView(e,s)&&!i&&(i=!0,"dyn"==d[2]&&d[3]>0&&(googletag.pubads().updateCorrelator(),tmgAdsLog("tmgAdsElementInView: UPDATE CORRELATOR: "+a)),googletag.cmd.push(tmgAdsBuildAd(e.id,"lazy=true","").display()),tmgAdsPerf("mark",["adverts_create_"+a])),t.addEventListener("scroll",tmgAdsThrottle(function(){tmgAdsElementIsInView(e,s)&&!i&&(i=!0,"dyn"==d[2]&&d[3]>0&&(googletag.pubads().updateCorrelator(),tmgAdsLog("tmgAdsElementInView: UPDATE CORRELATOR: "+a)),googletag.cmd.push(tmgAdsBuildAd(e.id,"","").display()),tmgAdsPerf("mark",["adverts_create_"+a]))},tmgAds.plugins.lazyLoad.delayCall))}function createAdvert(e,t,s){var d;return(d=document.createElement("div")).classList.add("js-advert","advert"),d.id=void 0!==t?"advert_tmg_"+e+"_"+t:"advert_tmg_"+e,d.id=void 0!==s&&s?d.id+"_"+s:d.id,d.setAttribute("data-adtype",e),d}function tmgAdsGetTitleForInjected(e){var t;return traverse()?t=e:tmgAdsGetTitleForInjected(e.parentNode),t.parentNode.querySelector(".component-heading").childNodes[0].textContent.trim().replace(/ /g,"_").toLowerCase()}function traverse(e){return e.parentNode.classList.contains("list-of-entities")}function tmgAdsNativeInject(e,t,s,d){void 0!==d?d.multiList&&void 0!==d.multiList?document.querySelectorAll(e).forEach(function(e,t){tmgAdsInjectList(e,d,s,t)}):tmgAdsInjectList(document.querySelector(e),d,s):tmgAdsInjectAdvert(document.querySelector(e),t,s)}function tmgAdsInjectList(e,t,s,d){var a,i,o,n,r,g=e.children.length,m=[],d=d;tmgSetAdvertPositions(t.repeat,m,t,g),m.forEach(function(t,m){r=createAdvert(s,m,d),(o=document.createElement("li")).classList.add("list-of-entities__item"),o.appendChild(r),n=t<=g?t:g,tmgAdsCreateItem(a=e.children[n-1],o,i=n>=g?"afterend":"beforebegin",r.id,"list")},d)}function tmgSetAdvertPositions(e,t,s,d){if(e)for(var a=Math.floor(d/s.position)>0?Math.floor(d/s.position):1,i=1;i<=a;i++)i>1?t.push(s.position*i-(i-1)):t.push(s.position*i);else t.push(s.position)}function tmgAdsInjectAdvert(e,t,s){var d=createAdvert(s,void 0);tmgAdsCreateItem(e,d,"before"===t?"beforebegin":"afterend",d.id,"std")}function tmgAdsCreateItem(e,t,s,d,a){requestAnimationFrame(function(){e.insertAdjacentHTML(s,t.outerHTML)})}function tmgAdsCreateNativeSlots(e){var t={vp:e.layout.viewport,pt:e.page.pagetype,data:e.plugins.nativeads.config};"live"!==t.pt&&"video"!==t.pt||(t.pt="story"),-1===e.plugins.nativeads.config.exclude.indexOf(e.page.businessseg)?(tmgAdsLog("tmgAdsCreateNativeSlots: Channel/BusinessSeg supported - "+e.page.businessseg),t.data.pagetype[t.pt]?t.data.pagetype[t.pt].adverts.forEach(function(s){if(s.active)if(-1===s.exclude.indexOf(e.page.businessseg)&&s.include.indexOf(e.page.businessseg)>=0||0==s.exclude.length&&0==s.include){tmgAdsLog("tmgAdsCreateNativeSlots: "+s.id+" - MATCHED");var d=s.id,a=s.selector,i=s.position,o=s.list,n=s.viewports,r=document.querySelector(a);n.forEach(function(e){e===t.vp&&document.body.contains(r)&&tmgAdsNativeInject(a,i,d,o)})}else tmgAdsLog("tmgAdsCreateNativeSlots: "+s.id+" - BLOCKED due to businessSegment over-ride ["+e.page.businessseg+"]");else tmgAdsLog("tmgAdsCreateNativeSlots: "+s.id+" - inactive")}):tmgAdsLog("tmgAdsCreateNativeSlots: Page template not supported - "+e.page.pagetype)):tmgAdsLog("tmgAdsCreateNativeSlots: Channel/BusinessSegment NOT supported - "+e.page.businessseg)}function tmgAdsCreate(e){if((tmgAds.plugins.headerBidders.prebid.active||tmgAds.plugins.adprebidon)&&!tmgAds.plugins.adprebidoff){if("received"!=tmgAds.plugins.headerBidders.prebid.bidstatus&&"timeout"!=tmgAds.plugins.headerBidders.prebid.bidstatus)return tmgAdsLog("PREBID:"+tmgAdsTimer()+": DELAY - prebid bids not returned  yet but timeout not met either: "+tmgAds.plugins.headerBidders.delayed),void setTimeout(function(){tmgAds.plugins.headerBidders.delayed+=10,tmgAdsCreate(e)},10);tmgAdsLog("received"==tmgAds.plugins.headerBidders.prebid.bidstatus?"PREBID:"+tmgAdsTimer()+": SUCCESS - prebid returned bids: "+tmgAds.plugins.headerBidders.delayed:"PREBID:"+tmgAdsTimer()+": FAILURE - prebid timed-out bids: "+tmgAds.plugins.headerBidders.delayed)}tmgAds.plugins.adprebidoff&&console.log("PREBID: Prebid.js turned off via url-param"),tmgAds.plugins.adamazona9off&&console.log("PREBID: Amazon A9 turned off via url-param"),tmgAds.plugins.adindexhboff&&console.log("PREBID: IndexExchange turned off via url-param");var t={};if(document.querySelector(".advert-banner")&&document.querySelector(".container-fluid")&&0==e.sticky){var s=document.querySelector(".advert-banner"),d=document.querySelector(".container-fluid");d.parentNode.insertBefore(s,d.nextSibling),s.style.paddingBottom="10px",s.style.borderBottom=0}if(e.sticky&&(tmgAdsLog("Sticky model is flagged (tmgAds.sticky=true)"),"ban"==e.config.deliveryModel.activityStatus||"mpu"==e.config.deliveryModel.activityStatus?("ban"==e.config.deliveryModel.activityStatus&&(tmgAdsLog("SETTING BAN = STICKY"),document.getElementsByClassName("js-advert-banner")[0].classList.add("is-sticky")),"mpu"==e.config.deliveryModel.activityStatus&&(tmgAdsLog("SETTING MPU = STICKY"),document.getElementsByClassName("js-advert-banner")[0]&&(document.getElementsByClassName("js-advert-banner")[0].style.display="none"),"gallery"==e.page.pagetype?document.getElementsByClassName("article__sidebar-inner")[0]?document.getElementsByClassName("article__sidebar-inner")[0].classList.add("is-sticky"):document.getElementsByClassName("gallery__sidebar")[0].classList.add("is-sticky"):document.getElementsByClassName("js-sidebar")[0]&&document.getElementsByClassName("js-sidebar")[0].classList.add("is-sticky"))):tmgAdsLog("NO MODEL TO SET ON THIS PAGE")),t.isLazyLoad=function(t){return e.plugins.lazyLoad[e.layout.viewport].active?(tmgAdsLog("LazyLoad-Check: PASS: viewport -> "+e.layout.viewport),null!==typeof e.dfp.customvars.geo&&(e.plugins.lazyLoad[e.layout.viewport].geo.indexOf(e.dfp.customvars.geo)>-1||0==e.plugins.lazyLoad[e.layout.viewport].geo.length)?(tmgAdsLog("LazyLoad-Check: PASS: geo -> "+e.dfp.customvars.geo),e.plugins.lazyLoad[e.layout.viewport].channels.indexOf(e.dfp.site)>-1||0==e.plugins.lazyLoad[e.layout.viewport].channels.length?(tmgAdsLog("LazyLoad-Check: PASS: site -> "+e.dfp.site),e.plugins.lazyLoad[e.layout.viewport].lazy.indexOf(t)>-1?(tmgAdsLog("LazyLoad-Check: PASS: adtype -> "+t),!0):(tmgAdsLog("LazyLoad-Check: FAIL: adtype -> "+t),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: site -> "+e.dfp.site,e.plugins.lazyLoad[e.layout.viewport].channels.indexOf(e.dfp.site)),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: geo -> "+e.dfp.customvars.geo),!1)):(tmgAdsLog("LazyLoad-Check: FAIL: viewport -> "+e.layout.viewport),!1)},t.adverts=document.querySelectorAll(".js-advert:not(.is-loaded)"),document.hasFocus())requestAnimationFrame(function(){for(var s=0;s<t.adverts.length;++s)t.adtype=t.adverts[s].id.split("_")[2],t.isLazyLoad(t.adtype)?(tmgAdsLog("tmgAdsCreate: LAZY: "+t.adverts[s].id),tmgAdsElementInView(t.adverts[s],window,{top:e.plugins.lazyLoad[e.layout.viewport].offset})):(tmgAdsLog("tmgAdsCreate: NON-LAZY: "+t.adverts[s].id),googletag.cmd.push(tmgAdsBuildAd(t.adverts[s].id,"","").display()))});else{console.log("tmgAdsCreate: NO FOCUS");for(var a=0;a<t.adverts.length;++a)t.adtype=t.adverts[a].id.split("_")[2],t.isLazyLoad(t.adtype)?(tmgAdsLog("tmgAdsCreate: LAZY: "+t.adverts[a].id),tmgAdsElementInView(t.adverts[a],window,{top:e.plugins.lazyLoad[e.layout.viewport].offset})):(tmgAdsLog("tmgAdsCreate: NON-LAZY: "+t.adverts[a].id),googletag.cmd.push(tmgAdsBuildAd(t.adverts[a].id,"","").display()))}}window.tmgAds=window.tmgAds||{},window.tmgAds.cmd=window.tmgAds.cmd||[],window.tmgAds.log=window.tmgAds.log||[],window.tmgAds.sticky=window.tmgAds.sticky||!1,window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}},window.tmgAds.about={version:"5.5.10",date:"2018-02-07",company:"Telegraph Media Group",author:"Sean Dillon - sean@telegraph.co.uk"},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){tmgAdsLog("##############################################################################"),tmgAdsLog("#                        TMG-GPT.JS  INITIALISATION                          #"),tmgAdsLog("##############################################################################"),tmgAdsInitEventHandlers(e),tmgAdsEvent("tmggpt:initstart"),tmgAdsInit(e),tmgAdsInitHeaderBidders(e),tmgAdsInitConfig(e),tmgAdsInitGeoAPIStatus(e),tmgAdsInitData(e),tmgAdsInitDeliveryModel(e),tmgAdsInitDFP(e),tmgAdsLoadJS("gptjs",e.plugins.gpt.url,function(){}),e.plugins.adgrapeshotoff?console.log("GRAPESHOT: Turned off by url-param."):e.plugins.grapeshot.active||e.plugins.adgrapeshoton?(e.plugins.adgrapeshoton&&console.log("GRAPESHOT: Turned on by url-param"),e.plugins.grapeshot.preload(),tmgAdsLoadJS("grapeshot",e.plugins.grapeshot.url,e.plugins.grapeshot.callback)):tmgAdsLog("GRAPESHOT: Not active"),e.plugins.adbeemrayoff?console.log("BEEMRAY: Turned off by url-param."):e.plugins.beemray.active||e.plugins.adbeemrayon?(e.plugins.adbeemrayon&&console.log("BEEMRAY: Turned on by url-param"),e.plugins.beemray.preload(),tmgAdsLoadJS("beemray",e.plugins.beemray.url,e.plugins.beemray.callback)):tmgAdsLog("BEEMRAY: Not active"),e.plugins.adscrolloff?console.log("SCROLL: Turned off by url-param."):e.plugins.scroll.active||e.plugins.adscrollon?(e.plugins.adscrollon&&console.log("SCROLL: Turned on by url-param"),e.plugins.scroll.preload(),tmgAdsLoadJS("scroll",e.plugins.scroll.url,e.plugins.scroll.callback)):tmgAdsLog("SCROLL: Not active"),tmgAdsEvent("tmggpt:initend"),"interactive"==document.readyState||"complete"==document.readyState?(tmgAdsLog("Page/DOM has already loaded - running tmgAdsCreate()"),(e.plugins.nativeads.active||e.plugins.adnativeon)&&tmgAdsCreateNativeSlots(e),requestAnimationFrame(function(){tmgAdsCreate(e)})):document.addEventListener("DOMContentLoaded",function(){tmgAdsLog("DOMContentLoaded event -> Page/DOM has now loaded - running tmgAdsCreate()"),(e.plugins.nativeads.active||e.plugins.adnativeon)&&tmgAdsCreateNativeSlots(e),requestAnimationFrame(function(){tmgAdsCreate(e)})})}(tmgAds);